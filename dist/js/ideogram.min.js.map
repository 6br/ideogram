{"version":3,"sources":["range.js","model-adapter.js","model-no-bands-adapter.js","layouts/layout.js","layouts/horizontal-layout.js","layouts/vertical-layout.js","layouts/paired-layout.js","layouts/small-layout.js","ploidy.js","color.js","views/chromosome.js","views/telocentric-chromosome.js","views/metacentric-chromosome.js","lib.js","views/chromosome-util.js","core.js","filter.js"],"names":["Range","data","this","_data","ModelAdapter","model","_model","_class","ModelNoBandsAdapter","call","Layout","config","ideo","_config","_ideo","_ploidy","_translate","undefined","chrSetMargin","k","chrMargin","ploidy","_tickSize","_isRotated","HorizontalLayout","_margin","left","top","VerticalLayout","PairedLayout","SmallLayout","Ploidy","_description","_normalize","ploidyDesc","Color","Chromosome","adapter","_adapter","getModel","_color","_bumpCoefficient","TelocentricChromosome","_pArmOffset","MetacentricChromosome","naturalSort","a","b","q","r","c","d","g","i","insensitive","toLowerCase","replace","j","l","split","m","n","parseInt","match","length","Date","parse","o","p","parseFloat","s","t","u","v","Math","max","isNaN","test","localeCompare","w","abs","slugify","value","componentToHex","hex","toString","rgbToHex","ChromosomeUtil","node","_node","prototype","getStart","start","getStop","stop","getLength","getColor","chrNumber","_getColor","Array","isArray","color","getInstance","bands","getCssClass","Object","create","width","push","name","px","perspective","rows","orientation","_getLeftMargin","_getYScale","chrWidth","getChromosomeLabels","chrElement","util","getSetLabel","getLabel","filter","rotateBack","Error","rotateForward","rotate","chrSetNumber","otherChrs","d3","selectAll","selector","style","getChromosomeLabelClass","_getAdditionalOffset","annotationHeight","numAnnotTracks","_getChromosomeSetSize","getSetSize","getMargin","getHeight","getChromosomeBandTickY1","getChromosomeBandTickY2","getChromosomeBandLabelTranslate","getChromosomeSetLabelAnchor","getChromosomeBandLabelAnchor","getChromosomeLabelXPosition","getChromosomeLabelYPosition","getChromosomeSetLabelYPosition","getChromosomeSetLabelXPosition","getChromosomeSetLabelTranslate","getChromosomeSetTranslate","getChromosomeSetYTranslate","margin","setNumber","callback","ideoBox","select","getBoundingClientRect","chrBox","scaleX","height","xOffset","scaleY","yOffset","transform","parentNode","transition","attr","on","labels","getSvg","append","enter","text","String","translate","remove","taxId","numChromosomes","chromosomes","lastSetOffset","getWidth","chrHeight","band","x","round","y","setSize","self","pad","annotationsLayout","prevTranslate","translateY","Number","chromosomeSetYTranslate","organisms","getTaxids","taxIdList","size","rowSize","additionalPadding","getChromosomesNumber","chrSetCode","keys","description","normalized","key","descValue","reverse","ancestors","existence","_getexistenceArray","array","getAncestor","exists","armNumber","desc","getArmColor","armColors","_getPolyploidArmColor","getBorderColor","ancestor","centromerePosition","_addPArmShape","clipPath","isPArmRendered","concat","_getPArmShape","_addQArmShape","isQArmRendered","_getQArmShape","render","container","id","_renderPArm","_renderQArm","_renderRangeSet","opacity","fill","isFullyBanded","strokeWidth","path","class","rangeSet","range","chr","map","rangesContainer","bandsXOffset","_bandsXOffset","convertBpToPx","_getShapeData","firstQBand","lastBand","rightTerminalPosition","x1","x2","x3","x2b","_renderBands","arm","stain","Boolean","e","G","Q","B","setTimeout","J","tt","constructor","rt","_state","arguments","_result","E","h","_","TypeError","then","ut","error","S","_label","it","st","et","resolve","nt","A","_onerror","T","ot","_subscribers","M","P","ct","C","O","at","Y","_t","promise","I","F","D","K","L","N","_instanceConstructor","_input","_remaining","_enumerate","U","W","global","Function","Promise","cast","pt","z","H","R","window","V","X","MutationObserver","WebKitMutationObserver","Z","process","$","Uint8ClampedArray","importScripts","MessageChannel","nextTick","document","createTextNode","observe","characterData","port1","onmessage","port2","postMessage","require","runOnLoop","runOnContext","random","substring","ft","lt","ht","all","race","reject","_setScheduler","_setAsap","_asap","catch","_eachEntry","_settledAt","_willSettleAt","dt","vt","polyfill","define","amd","module","exports","ES6Promise","slice","f","apply","forEach","Ideogram","rect","JSON","stringify","debug","dataDir","sexChromosomes","sex","resolution","showChromosomeLabels","querySelector","showBandLabels","showFullyBanded","brush","bump","adjustedBump","chromosome","rotatable","showNonNuclearChromosomes","initAnnotSettings","annotTracksHeight","onLoad","onLoadCallback","onDrawAnnots","onDrawAnnotsCallback","onBrushMove","onBrushMoveCallback","coordinateSystem","maxLength","bp","iscn","eutils","esearch","esummary","elink","9606","commonName","scientificName","scientificNameAbbr","assemblies","default","GRCh38","GRCh37","10090","4641","chromosomesArray","bandsToShow","bandData","init","getBands","content","taxid","lines","delimiter","tsvLines","columns","line","tsvLinesLength","source","firstColumn","tmp","chrBands","eval","indexOf","chromosomeName","getChromosomeModel","chrIndex","pxStop","chrLength","cs","hasBands","type","fullChromosomeLabels","orgName","csLength","pcenIndex","scale","multiorganism","drawChromosomeLabels","chromosomeLabelClass","_layout","chrSetLabelXPosition","chrSetLabelTranslate","each","index","fullLabels","setLabelTranslate","drawBandLabels","chrs","chrModel","textOffsets","overlappingLabelXRight","prevHiddenBoxIndex","xLeft","prevLabelXRight","textPadding","textsLength","indexesToShow","prevTextBoxLeft","prevTextBoxWidth","selectorsToShow","ithLength","rotateChromosomeLabels","scaleSvg","tracksHeight","hasOwnProperty","ci","chrMargin2","rotateBandLabels","bandLabels","coord","drawChromosome","rotateAndToggleDisplay","_groups","bpToIscnScale","offset","pxStart","pxLength","iscnStart","iscnStop","iscnLength","bpStart","bpStop","bpLength","convertPxToBp","pxToIscnScale","drawSynteny","syntenicRegions","r1","r2","syntenies","regionID","t0","getTime","insert","regions","startPx","stopPx","syntenicRegion","activeRegion","others","classed","t1","console","log","annotationsPath","localAnnotationsPath","annots","annotations","annotHeight","annotationTracks","barWidth","annotationsColor","parseBed","bed","annot","bedStartIndex","ucscStyle","rgb","label","rawAnnots","fetchAnnots","annotsUrl","json","extension","toUpperCase","alert","request","response","drawAnnots","friendlyAnnots","rawAnnot","drawProcessedAnnots","shape","processAnnotData","annotsByChr","ra","trackIndex","getHistogramBars","chrModels","chrPxStop","chrAnnots","chrName","bars","bar","barPx","nextBarPx","maxAnnotsPerBar","histogramScaling","firstGet","numBins","count","barAnnots","barCount","fillAnnots","filledAnnots","chrArray","layout","triangle","circle","chrAnnot","y1","y2","thisChrWidth","createBrush","from","to","extent","event","selection","xScale","invert","floor","ceil","selectedRegion","x0","chrLengthBp","scaleLinear","domain","right","brushX","yTranslate","move","getBandColorGradients","colors","color1","color2","color3","css","gradients","getTaxidFromEutils","organism","taxonomySearch","esearchresult","idlist","taxids","org","orgs","taxidInit","tmpChrs","assembly","urlOrg","fullyBandedTaxids","chromosomesUrl","get","asmAndChrArray","seenChrs","chromsomes","sort","sortChromosomes","getAssemblyAndChromosomesFromEutils","asmChrArray","aIsNuclear","bIsNuclear","aIsCP","bIsCP","aIsMT","bIsMT","assemblyAccession","asmSearch","asmUid","asmSummary","rsUid","nuccoreLink","links","ntSummary","results","result","cnIndex","rsuid","assemblyaccession","qs","linksets","linksetdbs","join","genome","subtype","subname","substr","slen","drawSexChromosomes","bandsArray","defs","sci","sexChromosomeIndexes","initDrawChromosomes","setSexChromosomes","numChrsInSet","sexChrs","list","processBandData","bandsByChr","chrsByTaxid","t0B","t1B","writeContainer","svgClass","svgWidth","svgHeight","html","finishInit","pa","timeout","clearTimeout","crossfilter","initCrossFilter","t0A","checkAnnotData","t0C","t1C","chrID","t1A","numBandDataResponses","accession","bandFileName","bandDataFileNames","unpackAnnots","unpackedAnnots","packAnnots","facet","annotsByFacet","facets","dimension","filterAnnots","selections","fn","now","counts","group","Infinity","filterAll"],"mappings":"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","file":"ideogram.min.js","sourcesContent":["/**\n * Chromosome range.\n * @public\n * @class\n * @param {Object} data - range data.\n * @param {Integer} data.chr - chromosome index.\n * @param {Integer[]} [data.ploidy] - array which controls on which chromosomes range should appear in case of ploidy.\n * @param {Integer} data.start - range start.\n * @param {Integer} data.stop - range end.\n * @param {String} data.color - range color.\n */\nfunction Range(data) {\n  this._data = data;\n}\n\nRange.prototype.getStart = function() {\n  return this._data.start;\n};\n\nRange.prototype.getStop = function() {\n  return this._data.stop;\n};\n\nRange.prototype.getLength = function() {\n  return this._data.stop - this._data.start;\n};\n\nRange.prototype.getColor = function(chrNumber) {\n  if (!('ploidy' in this._data)) {\n    return this._getColor(chrNumber);\n  } else if ('ploidy' in this._data && this._data.ploidy[chrNumber]) {\n    return this._getColor(chrNumber);\n  } else {\n    return 'transparent';\n  }\n};\n\nRange.prototype._getColor = function(chrNumber) {\n  if (Array.isArray(this._data.color)) {\n    return this._data.color[chrNumber];\n  } else {\n    return this._data.color;\n  }\n};\n","function ModelAdapter(model) {\n  this._model = model;\n  this._class = 'ModelAdapter';\n}\n\nModelAdapter.getInstance = function(model) {\n  if (model.bands) {\n    return new ModelAdapter(model);\n  } else {\n    return new ModelNoBandsAdapter(model);\n  }\n};\n\nModelAdapter.prototype.getModel = function() {\n  return this._model;\n};\n\nModelAdapter.prototype.getCssClass = function() {\n  return '';\n};\n","function ModelNoBandsAdapter(model) {\n    /*\n     * Call parent constructor.\n     */\n  ModelAdapter.call(this, model);\n  this._class = 'ModelNoBandsAdapter';\n}\n\nModelNoBandsAdapter.prototype = Object.create(ModelAdapter.prototype);\n\nModelNoBandsAdapter.prototype.getModel = function() {\n  this._model.bands = [];\n\n    // If chromosome width more, then 1 add single band to bands array\n  if (this._model.width > 1) {\n    this._model.bands.push({\n      name: 'q',\n      px: {\n        start: 0,\n        stop: this._model.width,\n        width: this._model.width\n      }\n    });\n  }\n\n  return this._model;\n};\n\nModelNoBandsAdapter.prototype.getCssClass = function() {\n  return 'noBands';\n};\n","function Layout(config, ideo) {\n  this._config = config;\n  this._ideo = ideo;\n  this._ploidy = this._ideo._ploidy;\n  this._translate = undefined;\n\n  if ('chrSetMargin' in config) {\n    this.chrSetMargin = config.chrSetMargin;\n  } else {\n    var k = this._config.chrMargin;\n    this.chrSetMargin = (this._config.ploidy > 1 ? k : 0);\n  }\n\n  // Chromosome band's size.\n  this._tickSize = 8;\n\n  // Chromosome rotation state.\n  this._isRotated = false;\n}\n\n// Factory method\nLayout.getInstance = function(config, ideo) {\n  if (\"perspective\" in config && config.perspective === \"comparative\") {\n    return new PairedLayout(config, ideo);\n  } else if (\"rows\" in config && config.rows > 1) {\n    return new SmallLayout(config, ideo);\n  } else if (config.orientation === 'vertical') {\n    return new VerticalLayout(config, ideo);\n  } else if (config.orientation === 'horizontal') {\n    return new HorizontalLayout(config, ideo);\n  } else {\n    return new VerticalLayout(config, ideo);\n  }\n};\n\n// Get chart left margin\nLayout.prototype._getLeftMargin = function() {\n  return this._margin.left;\n};\n\n// Get rotated chromosome y scale\nLayout.prototype._getYScale = function() {\n    // 20 is width of rotated chromosome.\n  return 20 / this._config.chrWidth;\n};\n\n// Get chromosome labels\nLayout.prototype.getChromosomeLabels = function(chrElement) {\n  var util = new ChromosomeUtil(chrElement);\n\n  return [util.getSetLabel(), util.getLabel()].filter(function(d) {\n    return d.length > 0;\n  });\n};\n\n// Rotate chromosome to original position\nLayout.prototype.rotateBack = function() {\n  throw new Error(this._class + '#rotateBack not implemented');\n};\n\n// Rotate chromosome to opposite position\nLayout.prototype.rotateForward = function() {\n  throw new Error(this._class + '#rotateForward not implemented');\n};\n\nLayout.prototype.rotate = function(chrSetNumber, chrNumber, chrElement) {\n  var ideo = this._ideo;\n\n    // Find chromosomes which should be hidden\n  var otherChrs = d3.selectAll(ideo.selector + \" g.chromosome\")\n    .filter(function() {\n      return this !== chrElement;\n    });\n\n  if (this._isRotated) {\n        // Reset _isRotated flag\n    this._isRotated = false;\n        // Rotate chromosome back\n    this.rotateBack(chrSetNumber, chrNumber, chrElement, function() {\n            // Show all other chromosomes and chromosome labels\n      otherChrs.style(\"display\", null);\n      d3.selectAll(ideo.selector + \" .chrSetLabel, .chrLabel\")\n        .style(\"display\", null);\n    });\n  } else {\n        // Set _isRotated flag\n    this._isRotated = true;\n\n        // Hide all other chromosomes and chromosome labels\n    otherChrs.style(\"display\", \"none\");\n    d3.selectAll(ideo.selector + \" .chrSetLabel, .chrLabel\")\n      .style(\"display\", \"none\");\n\n        // Rotate chromosome\n    this.rotateForward(chrSetNumber, chrNumber, chrElement);\n  }\n};\n\nLayout.prototype.getChromosomeLabelClass = function() {\n  if (this._config.ploidy === 1) {\n    return 'chrLabel';\n  } else {\n    return 'chrSetLabel';\n  }\n};\n\nLayout.prototype._getAdditionalOffset = function() {\n  return (\n    (this._config.annotationHeight || 0) * (this._config.numAnnotTracks || 1)\n  );\n};\n\nLayout.prototype._getChromosomeSetSize = function(chrSetNumber) {\n  // Get last chromosome set size.\n  var setSize = this._ploidy.getSetSize(chrSetNumber);\n\n  // Increase offset by last chromosome set size\n  return (\n    setSize * this._config.chrWidth * 2 + (this.chrSetMargin)\n  );\n};\n\n// Get layout margin\nLayout.prototype.getMargin = function() {\n  return this._margin;\n};\n\n// Get SVG element height\nLayout.prototype.getHeight = function() {\n  throw new Error(this._class + '#getHeight not implemented');\n};\n\nLayout.prototype.getChromosomeBandTickY1 = function() {\n  throw new Error(this._class + '#getChromosomeBandTickY1 not implemented');\n};\n\nLayout.prototype.getChromosomeBandTickY2 = function() {\n  throw new Error(this._class + '#getChromosomeBandTickY2 not implemented');\n};\n\n// Get chromosome's band translate attribute\nLayout.prototype.getChromosomeBandLabelTranslate = function() {\n  throw new Error(\n    this._class + '#getChromosomeBandLabelTranslate not implemented'\n  );\n};\n\n// Get chromosome set label anchor property\nLayout.prototype.getChromosomeSetLabelAnchor = function() {\n  return 'middle';\n};\n\n// Get chromosome's band label text-anchor value\nLayout.prototype.getChromosomeBandLabelAnchor = function() {\n  throw (\n    new Error(this._class + '#getChromosomeBandLabelAnchor not implemented')\n  );\n};\n\nLayout.prototype.getChromosomeLabelXPosition = function() {\n  throw new Error(this._class + '#getChromosomeLabelXPosition not implemented');\n};\n\n// Get chromosome label y position.\nLayout.prototype.getChromosomeLabelYPosition = function() {\n  return -5.5;\n};\n\n// \"i\" is chromosome number\nLayout.prototype.getChromosomeSetLabelYPosition = function(i) {\n  if (this._config.ploidy === 1) {\n    return this.getChromosomeLabelYPosition(i);\n  } else {\n    return -2 * this._config.chrWidth;\n  }\n};\n\nLayout.prototype.getChromosomeSetLabelXPosition = function() {\n  throw (\n    new Error(this._class + '#getChromosomeSetLabelXPosition not implemented')\n  );\n};\n\nLayout.prototype.getChromosomeSetLabelTranslate = function() {\n  throw (\n    new Error(this._class + '#getChromosomeSetLabelTranslate not implemented')\n  );\n};\n\n// Get chromosome set translate attribute\nLayout.prototype.getChromosomeSetTranslate = function() {\n  throw new Error(this._class + '#getChromosomeSetTranslate not implemented');\n};\n\n// Get chromosome set translate's y offset\nLayout.prototype.getChromosomeSetYTranslate = function() {\n  throw new Error(this._class + '#getChromosomeSetYTranslate not implemented');\n};\n","function HorizontalLayout(config, ideo) {\n  Layout.call(this, config, ideo);\n  this._class = 'HorizontalLayout';\n  this._margin = {\n    left: 20,\n    top: 30\n  };\n}\n\nHorizontalLayout.prototype = Object.create(Layout.prototype);\n\nHorizontalLayout.prototype._getLeftMargin = function() {\n  var margin = Layout.prototype._getLeftMargin.call(this);\n  if (this._config.ploidy > 1) {\n    margin *= 1.8;\n  }\n\n  return margin;\n};\n\nHorizontalLayout.prototype.rotateForward = function(setNumber, chrNumber,\n  chrElement, callback) {\n  var xOffset = 30;\n\n  var ideoBox = d3.select(this._ideo.selector).node().getBoundingClientRect();\n  var chrBox = chrElement.getBoundingClientRect();\n\n  var scaleX = (ideoBox.height / (chrBox.width + xOffset / 2)) * 0.9;\n  var scaleY = this._getYScale();\n\n  var yOffset = (chrNumber + 1) * ((this._config.chrWidth * 2) * scaleY);\n\n  var transform = (\n    'rotate(90) ' +\n    'translate(' + xOffset + ', -' + yOffset + ') ' +\n    'scale(' + scaleX + ', ' + scaleY + ')'\n  );\n\n  d3.select(chrElement.parentNode)\n        .transition()\n        .attr(\"transform\", transform)\n        .on('end', callback);\n\n    // Append new chromosome labels\n  var labels = this.getChromosomeLabels(chrElement);\n  d3.select(this._ideo.getSvg())\n        .append('g')\n        .attr('class', 'tmp')\n        .selectAll('text')\n        .data(labels)\n        .enter()\n        .append('text')\n        .attr('class', function(d, i) {\n          return i === 0 && labels.length === 2 ? 'chrSetLabel' : null;\n        })\n        .attr('x', 30)\n        .attr('y', function(d, i) {\n          return (i + 1 + labels.length % 2) * 12;\n        })\n        .style('text-anchor', 'middle')\n        .style('opacity', 0)\n        .text(String)\n        .transition()\n        .style('opacity', 1);\n};\n\nHorizontalLayout.prototype.rotateBack = function(setNumber, chrNumber,\n  chrElement, callback) {\n  var translate = this.getChromosomeSetTranslate(setNumber);\n\n  d3.select(chrElement.parentNode)\n        .transition()\n        .attr(\"transform\", translate)\n        .on('end', callback);\n\n  d3.selectAll(this._ideo.selector + ' g.tmp')\n        .style('opacity', 0)\n        .remove();\n};\n\nHorizontalLayout.prototype.getHeight = function(taxId) {\n    // Get last chromosome set offset.\n  var numChromosomes = this._config.chromosomes[taxId].length;\n  var lastSetOffset = this.getChromosomeSetYTranslate(numChromosomes - 1);\n\n    // Get last chromosome set size.\n  var lastSetSize = this._getChromosomeSetSize(numChromosomes - 1);\n\n    // Increase offset by last chromosome set size\n  lastSetOffset += lastSetSize;\n\n  return lastSetOffset + this._getAdditionalOffset() * 2;\n};\n\nHorizontalLayout.prototype.getWidth = function() {\n  return this._config.chrHeight + this._margin.top * 1.5;\n};\n\nHorizontalLayout.prototype.getChromosomeSetLabelAnchor = function() {\n  return 'end';\n};\n\nHorizontalLayout.prototype.getChromosomeBandLabelAnchor = function() {\n  return null;\n};\n\nHorizontalLayout.prototype.getChromosomeBandTickY1 = function() {\n  return 2;\n};\n\nHorizontalLayout.prototype.getChromosomeBandTickY2 = function() {\n  return 10;\n};\n\nHorizontalLayout.prototype.getChromosomeBandLabelTranslate = function(band) {\n  var x = this._ideo.round(-this._tickSize + band.px.start + band.px.width / 2);\n  var y = -10;\n\n  return {\n    x: x,\n    y: y,\n    translate: 'translate(' + x + ',' + y + ')'\n  };\n};\n\nHorizontalLayout.prototype.getChromosomeSetLabelTranslate = function() {\n  return null;\n};\n\nHorizontalLayout.prototype.getChromosomeSetTranslate = function(setNumber) {\n  var leftMargin = this._getLeftMargin();\n  var chromosomeSetYTranslate = this.getChromosomeSetYTranslate(setNumber);\n  return \"translate(\" + leftMargin + \", \" + chromosomeSetYTranslate + \")\";\n};\n\nHorizontalLayout.prototype.getChromosomeSetYTranslate = function(setNumber) {\n  // If no detailed description provided just use one formula for all cases.\n  if (!this._config.ploidyDesc) {\n    return this._config.chrMargin * (setNumber + 1);\n  }\n\n  // Id detailed description provided start to calculate offsets\n  //  for each chromosome set separately. This should be done only once.\n  if (!this._translate) {\n    // First offset equals to zero.\n    this._translate = [1];\n\n    // Loop through description set\n    for (var i = 1; i < this._config.ploidyDesc.length; i++) {\n      this._translate[i] =\n        this._translate[i - 1] + this._getChromosomeSetSize(i - 1);\n    }\n  }\n\n  return this._translate[setNumber];\n};\n\nHorizontalLayout.prototype.getChromosomeSetLabelXPosition = function(i) {\n  if (this._config.ploidy === 1) {\n    return this.getChromosomeLabelXPosition(i);\n  } else {\n    return -20;\n  }\n};\n\nHorizontalLayout.prototype.getChromosomeSetLabelYPosition = function(i) {\n  var setSize = this._ploidy.getSetSize(i),\n    config = this._config,\n    chrMargin = config.chrMargin,\n    chrWidth = config.chrWidth;\n\n  if (config.ploidy === 1) {\n    y = chrWidth / 2 + 3;\n  } else {\n    y = (setSize * chrMargin) / 2;\n  }\n\n  return y;\n};\n\nHorizontalLayout.prototype.getChromosomeLabelXPosition = function() {\n  return -8;\n};\n\nHorizontalLayout.prototype.getChromosomeLabelYPosition = function() {\n  return this._config.chrWidth;\n};\n","\nfunction VerticalLayout(config, ideo) {\n  Layout.call(this, config, ideo);\n  this._class = 'VerticalLayout';\n    // Layout margins\n  this._margin = {\n    top: 30,\n    left: 15\n  };\n}\n\nVerticalLayout.prototype = Object.create(Layout.prototype);\n\nVerticalLayout.prototype.rotateForward = function(setNumber, chrNumber,\n  chrElement, callback) {\n  var self = this;\n\n  var xOffset = 20;\n\n  var ideoBox = d3.select(this._ideo.selector).node().getBoundingClientRect();\n  var chrBox = chrElement.getBoundingClientRect();\n\n  var scaleX = (ideoBox.width / chrBox.height) * 0.97;\n  var scaleY = this._getYScale();\n\n  var transform =\n    \"translate(\" + xOffset + \", 25) scale(\" + scaleX + \", \" + scaleY + \")\";\n\n  d3.select(chrElement.parentNode)\n        .transition()\n        .attr(\"transform\", transform)\n        .on('end', callback);\n\n    // Append new chromosome labels\n  var labels = this.getChromosomeLabels(chrElement);\n  var y = (xOffset + self._config.chrWidth) * 1.3;\n  d3.select(this._ideo.getSvg())\n    .append('g')\n    .attr('class', 'tmp')\n    .selectAll('text')\n    .data(labels)\n    .enter()\n    .append('text')\n    .attr('class', function(d, i) {\n      return i === 0 && labels.length === 2 ? 'chrSetLabel' : null;\n    })\n    .attr('x', 0)\n    .attr('y', y).style('opacity', 0)\n    .text(String)\n    .transition()\n    .style('opacity', 1);\n};\n\nVerticalLayout.prototype.rotateBack = function(setNumber, chrNumber,\n  chrElement, callback) {\n  var translate = this.getChromosomeSetTranslate(setNumber);\n\n  d3.select(chrElement.parentNode)\n        .transition()\n        .attr(\"transform\", translate)\n        .on('end', callback);\n\n  d3.selectAll(this._ideo.selector + ' g.tmp')\n        .style('opacity', 0)\n        .remove();\n};\n\nVerticalLayout.prototype.getHeight = function() {\n  return this._config.chrHeight + this._margin.top * 1.5;\n};\n\nVerticalLayout.prototype.getWidth = function() {\n  return '97%';\n};\n\nVerticalLayout.prototype.getChromosomeBandLabelTranslate = function() {\n\n};\n\nVerticalLayout.prototype.getChromosomeSetLabelTranslate = function() {\n  return 'rotate(-90)';\n};\n\nVerticalLayout.prototype.getChromosomeSetTranslate = function(setNumber) {\n  var marginTop = this._margin.top;\n  var chromosomeSetYTranslate = this.getChromosomeSetYTranslate(setNumber);\n  return (\n    'rotate(90) ' +\n    'translate(' + marginTop + ', -' + chromosomeSetYTranslate + ')'\n  );\n};\n\nVerticalLayout.prototype.getChromosomeSetYTranslate = function(setNumber) {\n    // Get additional padding caused by annotation/histogram tracks\n  var pad = this._getAdditionalOffset(),\n    margin = this._config.chrMargin,\n    width = this._config.chrWidth,\n    translate;\n\n    // If no detailed description provided just use one formula for all cases\n  if (!this._config.ploidyDesc) {\n   // TODO:\n   // This part of code contains a lot magic numbers and if\n   // statements for exactly corresponing to original ideogram examples.\n   // But all this stuff should be removed. Calculation of translate\n   // should be a simple formula applied for all cases listed below.\n   // Now they are diffirent because of Layout:_getAdditionalOffset do\n   // not meet for cases when no annotation, when annotation exists and\n   // when histogram used\n\n    if (this._config.annotationsLayout === \"histogram\") {\n      return margin / 2 + setNumber * (margin + width + 2) + pad * 2 + 1;\n    } else {\n      translate = width + setNumber * (margin + width) + pad * 2;\n      if (pad > 0) {\n        return translate;\n      } else {\n        return translate + 4 + (2 * setNumber);\n      }\n    }\n  }\n\n    // If detailed description provided start to calculate offsets\n    // for each chromosome set separately. This should be done only once\n  if (!this._translate) {\n    // First offset equals to zero\n    this._translate = [this._ploidy.getSetSize(0) * width * 2];\n    var prevTranslate;\n    // Loop through description set\n    for (var i = 1; i < this._config.ploidyDesc.length; i++) {\n      prevTranslate = this._translate[i - 1];\n      this._translate[i] = prevTranslate + this._getChromosomeSetSize(i - 1);\n    }\n  }\n\n  return this._translate[setNumber];\n};\n\nVerticalLayout.prototype.getChromosomeSetLabelXPosition = function() {\n  return (this._config.chrWidth * this._config.ploidy) / -2;\n};\n\nVerticalLayout.prototype.getChromosomeLabelXPosition = function() {\n  return this._config.chrWidth / -2;\n};\n","function PairedLayout(config, ideo) {\n  Layout.call(this, config, ideo);\n\n  this._class = 'PairedLayout';\n\n  this._margin = {\n    left: 30\n  };\n}\n\nPairedLayout.prototype = Object.create(Layout.prototype);\n\nPairedLayout.prototype.rotateForward = function(setNumber, chrNumber,\n  chrElement, callback) {\n  var self = this;\n  var ideo = this._ideo;\n\n    // Get ideo container and chromosome set dimensions\n  var ideoBox = d3.select(ideo.selector).node().getBoundingClientRect();\n  var chrBox = chrElement.getBoundingClientRect();\n    // Evaluate dimensions scale coefficients\n  var scaleX = (ideoBox.width / chrBox.height) * 0.97;\n  var scaleY = this._getYScale();\n    // Evaluate y offset of chromosome. It is different for first and the second one\n  var yOffset = setNumber ? 150 : 25;\n\n  var transform =\n    'translate(15, ' + yOffset + ') scale(' + scaleX + ', ' + scaleY + ')';\n\n    // Run rotation procedure\n  d3.select(chrElement.parentNode)\n    .transition()\n    .attr(\"transform\", transform)\n    .on('end', function() {\n        // Run callback function if provided\n      if (callback) {\n        callback();\n      }\n\n      var translateY = (6 * Number(!setNumber));\n\n      // Rotate band labels\n      d3.select(chrElement.parentNode).selectAll('g.bandLabel text')\n        .attr('transform', 'rotate(90) translate(0, ' + translateY + ')')\n        .attr(\"text-anchor\", \"middle\");\n\n      // Hide syntenic regions\n      d3.selectAll(ideo.selector + ' .syntenicRegion').style(\"display\", 'none');\n    });\n\n    // Append new chromosome labels\n  var labels = this.getChromosomeLabels(chrElement);\n\n  d3.select(this._ideo.getSvg())\n    .append('g')\n    .attr('class', 'tmp')\n    .selectAll('text')\n    .data(this.getChromosomeLabels(chrElement))\n    .enter()\n    .append('text')\n    .attr('class', function(d, i) {\n      return i === 0 && labels.length === 2 ? 'chrSetLabel' : null;\n    })\n    .attr('x', 0)\n    .attr('y', yOffset + (self._config.chrWidth * scaleX / 2) * 1.15)\n    .style('opacity', 0)\n    .text(String)\n    .transition()\n    .style('opacity', 1);\n};\n\nPairedLayout.prototype.rotateBack = function(setNumber, chrNumber, chrElement,\n  callback) {\n  var ideo = this._ideo;\n\n    // Get intial transformation string for chromosome set\n  var translate = this.getChromosomeSetTranslate(setNumber);\n\n    // Run rotation procedure\n  d3.select(chrElement.parentNode)\n        .transition()\n        .attr(\"transform\", translate)\n        .on('end', function() {\n            // Run callback fnuction if provided\n          callback();\n            // Show syntenic regions\n          d3.selectAll(ideo.select + ' .syntenicRegion').style(\"display\", null);\n            // Reset changed attributes to original state\n          d3.select(chrElement.parentNode).selectAll('g.bandLabel text')\n            .attr('transform', null)\n            .attr(\"text-anchor\", setNumber ? null : 'end');\n        });\n\n  d3.selectAll(ideo.selector + ' g.tmp')\n        .style('opacity', 0)\n        .remove();\n};\n\nPairedLayout.prototype.getHeight = function() {\n  return this._config.chrHeight + this._margin.left * 1.5;\n};\n\nPairedLayout.prototype.getWidth = function() {\n  return '97%';\n};\n\nPairedLayout.prototype.getChromosomeBandTickY1 = function(chrNumber) {\n  return chrNumber % 2 ? this._config.chrWidth : this._config.chrWidth * 2;\n};\n\nPairedLayout.prototype.getChromosomeBandTickY2 = function(chrNumber) {\n  var width = this._config.chrWidth;\n  return chrNumber % 2 ? width - this._tickSize : width * 2 + this._tickSize;\n};\n\nPairedLayout.prototype.getChromosomeBandLabelAnchor = function(chrNumber) {\n  return chrNumber % 2 ? null : 'end';\n};\n\nPairedLayout.prototype.getChromosomeBandLabelTranslate = function(band,\n  chrNumber) {\n  var x = chrNumber % 2 ? 10 : -this._config.chrWidth - 10;\n  var y = this._ideo.round(band.px.start + band.px.width / 2) + 3;\n\n  return {\n    x: y,\n    y: y,\n    translate: 'rotate(-90) translate(' + x + ', ' + y + ')'\n  };\n};\n\nPairedLayout.prototype.getChromosomeLabelXPosition = function() {\n  return -this._tickSize;\n};\n\nPairedLayout.prototype.getChromosomeSetLabelXPosition = function() {\n  return this._config.chrWidth / -2;\n};\n\nPairedLayout.prototype.getChromosomeSetLabelTranslate = function() {\n  return 'rotate(-90)';\n};\n\nPairedLayout.prototype.getChromosomeSetTranslate = function(setNumber) {\n  var chromosomeSetYTranslate = this.getChromosomeSetYTranslate(setNumber);\n  return (\n    'rotate(90) ' +\n    'translate(' + this._margin.left + ', -' + chromosomeSetYTranslate + ')'\n  );\n};\n\nPairedLayout.prototype.getChromosomeSetYTranslate = function(setNumber) {\n  return 200 * (setNumber + 1);\n};\n","function SmallLayout(config, ideo) {\n  Layout.call(this, config, ideo);\n\n  this._class = 'SmallLayout';\n\n  this._margin = {\n    left: 36.5,\n    top: 10\n  };\n}\n\nSmallLayout.prototype = Object.create(Layout.prototype);\n\nSmallLayout.prototype.rotateForward = function(setNumber, chrNumber,\n  chrElement, callback) {\n  var ideoBox = d3.select(this._ideo.selector).node().getBoundingClientRect();\n  var chrBox = chrElement.getBoundingClientRect();\n\n  var scaleX = (ideoBox.width / chrBox.height) * 0.97;\n  var scaleY = this._getYScale();\n\n  transform = \"translate(5, 25) scale(\" + scaleX + \", \" + scaleY + \")\";\n\n  d3.select(chrElement.parentNode)\n        .transition()\n        .attr(\"transform\", transform)\n        .on('end', callback);\n};\n\nSmallLayout.prototype.rotateBack = function(setNumber, chrNumber, chrElement,\n  callback) {\n  var translate = this.getChromosomeSetTranslate(setNumber);\n\n  d3.select(chrElement.parentNode)\n        .transition()\n        .attr(\"transform\", translate)\n        .on('end', callback);\n};\n\nSmallLayout.prototype.getHeight = function() {\n  return this._config.rows * (this._config.chrHeight + this._margin.top * 1.5);\n};\n\nSmallLayout.prototype.getWidth = function() {\n  return '97%';\n};\n\nSmallLayout.prototype.getChromosomeBandLabelTranslate = function() {\n\n};\n\nSmallLayout.prototype.getChromosomeSetLabelTranslate = function() {\n  return 'rotate(-90)';\n};\n\nSmallLayout.prototype.getChromosomeSetTranslate = function(setNumber) {\n    // Get organisms id list\n  var organisms = [];\n  this._ideo.getTaxids(function(taxIdList) {\n    organisms = taxIdList;\n  });\n    // Get first organism chromosomes amount\n  var size = this._ideo.config.chromosomes[organisms[0]].length;\n    // Amount of chromosomes per number\n  var rowSize = size / this._config.rows;\n\n  var xOffset;\n  var yOffset;\n\n  if (setNumber > rowSize - 1) {\n    xOffset = this._margin.left + this._config.chrHeight * 1.4;\n    yOffset = this.getChromosomeSetYTranslate(setNumber - rowSize);\n  } else {\n    xOffset = this._margin.left;\n    yOffset = this.getChromosomeSetYTranslate(setNumber);\n  }\n\n  return 'rotate(90) translate(' + xOffset + ', -' + yOffset + ')';\n};\n\nSmallLayout.prototype.getChromosomeSetYTranslate = function(setNumber) {\n    // Get additional padding caused by annotation tracks\n  var additionalPadding = this._getAdditionalOffset();\n    // If no detailed description provided just use one formula for all cases\n  return (\n    this._margin.left * (setNumber) + this._config.chrWidth +\n    additionalPadding * 2 + additionalPadding * setNumber\n  );\n};\n\nSmallLayout.prototype.getChromosomeSetLabelXPosition = function(setNumber) {\n  return (\n    ((this._ploidy.getSetSize(setNumber) * this._config.chrWidth + 20) / -2) +\n    (this._config.ploidy > 1 ? 0 : this._config.chrWidth)\n  );\n};\n\nSmallLayout.prototype.getChromosomeLabelXPosition = function() {\n  return this._config.chrWidth / -2;\n};\n","function Ploidy(config) {\n  this._config = config;\n  this._description = this._normalize(this._config.ploidyDesc);\n}\n\n// Get number of chromosomes in a chromosome set\nPloidy.prototype.getChromosomesNumber = function(setNumber) {\n  if (this._config.ploidyDesc) {\n    var chrSetCode = this._config.ploidyDesc[setNumber];\n    if (chrSetCode instanceof Object) {\n      return Object.keys(chrSetCode)[0].length;\n    } else {\n      return chrSetCode.length;\n    }\n  } else {\n    return this._config.ploidy || 1;\n  }\n};\n\n// Normalize use defined description\nPloidy.prototype._normalize = function(description) {\n  var normalized, key, descValue;\n\n  // Return the same if no description provided\n  if (!description) {\n    return description;\n  }\n\n  // Array of normalized description objects\n  normalized = [];\n\n  // Loop through description and normalize\n  for (key in description) {\n    descValue = description[key];\n    if (typeof descValue === 'string') {\n      if (this._config.orientation === 'vertical') {\n        descValue = descValue.split('').reverse();\n      }\n      normalized.push({\n        ancestors: descValue,\n        existence: this._getexistenceArray(descValue.length)\n      });\n    } else {\n      normalized.push({\n        ancestors: Object.keys(descValue)[0],\n        existence: descValue[Object.keys(descValue)[0]]\n      });\n    }\n  }\n\n  return normalized;\n};\n\n// Get array filled by '11' elements\nPloidy.prototype._getexistenceArray = function(length) {\n  var array = [];\n\n  for (var i = 0; i < length; i++) {\n    array.push('11');\n  }\n\n  return array;\n};\n\nPloidy.prototype.getSetSize = function(chrSetNumber) {\n  if (this._description) {\n    return this._description[chrSetNumber].ancestors.length;\n  } else {\n    return 1;\n  }\n};\n\n// Get ancestor letter\nPloidy.prototype.getAncestor = function(chrSetNumber, chrNumber) {\n  if (this._description) {\n    return this._description[chrSetNumber].ancestors[chrNumber];\n  } else {\n    return '';\n  }\n};\n\n// Check if chromosome's arm should be rendered.\n// If no description was provided, method returns true and\n// something another depending on user provided description.\nPloidy.prototype.exists = function(chrSetNumber, chrNumber, armNumber) {\n  if (this._description) {\n    var desc = this._description[chrSetNumber].existence[chrNumber][armNumber];\n    return Number(desc) > 0;\n  } else {\n    return true;\n  }\n};\n","function Color(config) {\n    // Ideogram config\n  this._config = config;\n  this._ploidy = new Ploidy(this._config);\n}\n\nColor.prototype.getArmColor = function(chrSetNumber, chrNumber, armNumber) {\n  if (this._config.armColors) {\n    return this._config.armColors[armNumber];\n  } else if (this._config.ancestors) {\n    return this._getPolyploidArmColor(chrSetNumber, chrNumber, armNumber);\n  } else {\n    return null;\n  }\n};\n\nColor.prototype.getBorderColor = function(chrSetNumber, chrNumber, armNumber) {\n  if (chrNumber < this._config.ploidy) {\n    return '#000';\n  } else if (this._ploidy.exists(chrSetNumber, chrNumber, armNumber)) {\n    return '#000';\n  } else {\n    return '#fff';\n  }\n};\n\nColor.prototype._getPolyploidArmColor = function(chrSetNumber, chrNumber,\n  armNumber) {\n  if (!this._ploidy.exists(chrSetNumber, chrNumber, armNumber)) {\n    return 'transparent';\n  } else {\n    var ancestor = this._ploidy.getAncestor(chrSetNumber, chrNumber, armNumber);\n    return this._config.ancestors[ancestor];\n  }\n};\n","function Chromosome(adapter, config, ideo) {\n  this._adapter = adapter;\n  this._model = this._adapter.getModel();\n  this._config = config;\n  this._ideo = ideo;\n  this._color = new Color(this._config);\n  this._bumpCoefficient = 5;\n}\n\n// Factory method\nChromosome.getInstance = function(adapter, config, ideo) {\n  if (adapter.getModel().centromerePosition === 'telocentric') {\n    return new TelocentricChromosome(adapter, config, ideo);\n  } else {\n    return new MetacentricChromosome(adapter, config, ideo);\n  }\n};\n\nChromosome.prototype._addPArmShape = function(clipPath, isPArmRendered) {\n  if (isPArmRendered) {\n    return clipPath.concat(this._getPArmShape());\n  } else {\n    return clipPath;\n  }\n};\n\nChromosome.prototype._addQArmShape = function(clipPath, isQArmRendered) {\n  if (isQArmRendered) {\n    return clipPath.concat(this._getQArmShape());\n  } else {\n    return clipPath;\n  }\n};\n\nChromosome.prototype.render = function(container, chrSetNumber, chrNumber) {\n    // Append bands container and apply clip-path on it\n\n  var self = this;\n\n  container = container.append('g')\n    .attr('class', 'bands')\n    .attr(\"clip-path\", \"url(#\" + this._model.id + \"-chromosome-set-clippath)\");\n\n    // Render chromosome arms\n  var isPArmRendered = this._renderPArm(container, chrSetNumber, chrNumber);\n  var isQArmRendered = this._renderQArm(container, chrSetNumber, chrNumber);\n\n    // Render range set\n  this._renderRangeSet(container, chrSetNumber, chrNumber);\n\n    // Push arms shape string into clipPath array\n  var clipPath = [];\n  clipPath = this._addPArmShape(clipPath, isPArmRendered);\n  clipPath = this._addQArmShape(clipPath, isQArmRendered);\n\n  var opacity = '0';\n  var fill = '';\n  var isFullyBanded = this.isFullyBanded();\n  if ('ancestors' in this._ideo.config && !('rangeSet' in this._ideo.config)) {\n    // E.g. diploid human genome (with translucent overlay)\n    fill = self._color.getArmColor(chrSetNumber, chrNumber, 0);\n    if (isFullyBanded) {\n      opacity = '0.5';\n    }\n  } else if (isFullyBanded) {\n    // E.g. mouse reference genome\n    opacity = null;\n    fill = 'transparent';\n  } else if (!('ancestors' in this._ideo.config)) {\n    // E.g. chimpanzee assembly Pan_tro 3.0\n    opacity = '1';\n  }\n\n  // Render chromosome border\n  container.append('g')\n        .attr('class', 'chromosome-border')\n        .selectAll('path')\n        .data(clipPath)\n        .enter()\n        .append('path')\n        .attr('fill', fill)\n        .style('fill-opacity', opacity)\n        .attr('stroke', function(d, i) {\n          return self._color.getBorderColor(chrSetNumber, chrNumber, i);\n        })\n        .attr('stroke-width', function(d) {\n          return ('strokeWidth' in d ? d.strokeWidth : 1);\n        })\n        .attr('d', function(d) {\n          return d.path;\n        }).attr('class', function(d) {\n          return d.class;\n        });\n\n  return clipPath;\n};\n\nChromosome.prototype._renderRangeSet = function(container, chrSetNumber,\n  chrNumber) {\n  if (!('rangeSet' in this._config)) {\n    return;\n  }\n\n  var rangeSet = this._config.rangeSet.filter(function(range) {\n    return range.chr - 1 === chrSetNumber;\n  }).map(function(range) {\n    return new Range(range);\n  });\n\n  var rangesContainer = container.append('g')\n        .attr('class', 'range-set');\n\n  var self = this;\n  var ideo = self._ideo;\n  var bandsXOffset = ideo._bandsXOffset;\n\n  rangesContainer.selectAll('rect.range')\n        .data(rangeSet)\n        .enter()\n        .append('rect')\n        .attr('class', 'range')\n        .attr('x', function(range) {\n          var startPx = ideo.convertBpToPx(self._model, range.getStart());\n          return startPx - bandsXOffset;\n        }).attr('y', 0)\n        .attr('width', function(range) {\n          var lengthPx = ideo.convertBpToPx(self._model, range.getLength());\n          return lengthPx - bandsXOffset;\n        }).attr('height', this._config.chrWidth)\n        .style('fill', function(range) {\n          return range.getColor(chrNumber);\n        });\n};\n\n// Get chromosome's shape main values\nChromosome.prototype._getShapeData = function() {\n    // First q band from bands sequence\n  var firstQBand;\n  for (var i = 0; i < this._model.bands.length; i++) {\n    if (this._model.bands[i].name[0] === 'q') {\n      firstQBand = this._model.bands[i];\n      break;\n    }\n  }\n\n  // Chromosome's right position\n  var lastBand = this._model.bands.length - 1;\n  var rightTerminalPosition = this._model.bands[lastBand].px.stop;\n\n    // Properties description:\n    // x1 - left terminal start position\n    // x2 - centromere position\n    // x3 - right terminal end position\n    // w - chromosome width\n    // b - bump size\n  return {\n    x1: 0,\n    x2: firstQBand ? firstQBand.px.start : rightTerminalPosition,\n    x3: rightTerminalPosition,\n    w: this._config.chrWidth,\n    b: this._config.chrWidth / this._bumpCoefficient\n  };\n};\n\nChromosome.prototype._getPArmShape = function() {\n  var d = this._getShapeData(),\n    x = d.x2 - d.b;\n\n  if (this.isFullyBanded() || 'ancestors' in this._ideo.config) {\n    // Encountered when chromosome has any of:\n    //  - One placeholder \"band\", e.g. pig genome GCF_000003025.5\n    //  - Many (> 2) bands, e.g. human reference genome\n    //  - Ancestor colors in ploidy configuration, as in ploidy_basic.html\n    return {\n      class: '',\n      path:\n        'M' + d.b + ',0 ' +\n        'L' + x + ',0 ' +\n        'Q' + (d.x2 + d.b) + ',' + (d.w / 2) + ',' + x + ',' + d.w + ' ' +\n        'L' + d.b + ',' + d.w + ' ' +\n        'Q-' + d.b + ',' + (d.w / 2) + ',' + d.b + ',0'\n    };\n  } else {\n    // e.g. chimpanzee assembly Pan_tro 3.0\n    return [{\n      class: '',\n      path:\n        'M' + d.b + ',0 ' +\n        'L' + (x - 2) + ',0 ' +\n        'L' + (x - 2) + ',' + d.w + ' ' +\n        'L' + d.b + ',' + d.w + ' ' +\n        'Q-' + d.b + ',' + (d.w / 2) + ',' + d.b + ',0'\n    }, {\n      class: 'acen',\n      path:\n        'M' + x + ',0 ' +\n        'Q' + (d.x2 + d.b) + ',' + (d.w / 2) + ',' + x + ',' + d.w + ' ' +\n        'L' + x + ',' + d.w + ' ' +\n        'L' + (x - 2) + ',' + d.w + ' ' +\n        'L' + (x - 2) + ',0'\n    }];\n  }\n};\n\nChromosome.prototype._getQArmShape = function() {\n  var d = this._getShapeData(),\n    x = d.x3 - d.b,\n    x2b = d.x2 + d.b;\n\n  if (this.isFullyBanded() || 'ancestors' in this._ideo.config) {\n    return {\n      class: '',\n      path:\n        'M' + x2b + ',0 ' +\n        'L' + x + ',0 ' +\n        'Q' + (d.x3 + d.b) + ',' + (d.w / 2) + ',' + x + ',' + d.w + ' ' +\n        'L' + x2b + ',' + d.w + ' ' +\n        'Q' + (d.x2 - d.b) + ',' + (d.w / 2) + ',' + x2b + ',0'\n    };\n  } else {\n    // e.g. chimpanzee assembly Pan_tro 3.0\n    return [{\n      path:\n        'M' + x2b + ',0 ' +\n        'L' + x + ',0 ' +\n        'Q' + (d.x3 + d.b) + ',' + (d.w / 2) + ',' + x + ',' + d.w + ' ' +\n        'L' + x2b + ',' + d.w + ' ' +\n        'L' + x2b + ',0'\n    }, {\n      class: 'acen',\n      path:\n        'M' + x2b + ',0' +\n        'Q' + (d.x2 - d.b) + ',' + (d.w / 2) + ',' + x2b + ',' + d.w + ' ' +\n        'L' + x2b + ',' + d.w +\n        'L' + (x2b + 2) + ',' + d.w +\n        'L' + (x2b + 2) + ',0'\n    }];\n  }\n};\n\nChromosome.prototype.isFullyBanded = function() {\n  return (\n    this._model.bands &&\n    (this._model.bands.length !== 2 || this._model.bands[0].name[0] === 'q')\n  );\n};\n\n// Render arm bands\nChromosome.prototype._renderBands = function(container, chrSetNumber,\n  chrNumber, bands, arm) {\n  var self = this;\n  var armNumber = arm === 'p' ? 0 : 1;\n  var fill = '';\n  if ('ancestors' in this._ideo.config && !(this.isFullyBanded())) {\n    fill = self._color.getArmColor(chrSetNumber, chrNumber, armNumber);\n  }\n\n  container.selectAll(\"path.band.\" + arm)\n    .data(bands)\n    .enter()\n    .append(\"path\")\n    .attr(\"id\", function(d) {\n      return self._model.id + \"-\" + d.name.replace(\".\", \"-\");\n    })\n    .attr(\"class\", function(d) {\n      return 'band ' + arm + '-band ' + d.stain;\n    })\n    .attr(\"d\", function(d) {\n      var start = self._ideo.round(d.px.start);\n      var length = self._ideo.round(d.px.width);\n\n      x = start + length;\n\n      return \"M \" + start + \", 0\" +\n            \"l \" + length + \" 0 \" +\n            \"l 0 \" + self._config.chrWidth + \" \" +\n            \"l -\" + length + \" 0 z\";\n    })\n    .style('fill', fill);\n};\n\n// Render chromosome's p arm.\n// Returns boolean which indicates is any bands was rendered\nChromosome.prototype._renderPArm = function(container, chrSetNumber,\n  chrNumber) {\n  var bands = this._model.bands.filter(function(band) {\n    return band.name[0] === 'p';\n  });\n\n  this._renderBands(container, chrSetNumber, chrNumber, bands, 'p');\n\n  return Boolean(bands.length);\n};\n\n// Render chromosome's q arm.\n// Returns boolean which indicates is any bands was rendered\nChromosome.prototype._renderQArm = function(container, chrSetNumber,\n  chrNumber) {\n  var bands = this._model.bands.filter(function(band) {\n    return band.name[0] === 'q';\n  });\n\n  this._renderBands(container, chrSetNumber, chrNumber, bands, 'q');\n\n  return Boolean(bands.length);\n};\n","function TelocentricChromosome(model, config, ideo) {\n  Chromosome.call(this, model, config, ideo);\n  this._class = 'TelocentricChromosome';\n  this._pArmOffset = 3;\n}\n\nTelocentricChromosome.prototype = Object.create(Chromosome.prototype);\n\nTelocentricChromosome.prototype._addPArmShape = function(clipPath) {\n  return clipPath.concat(this._getPArmShape());\n};\n\nTelocentricChromosome.prototype._getPArmShape = function() {\n  var d = this._getShapeData();\n  d.o = this._pArmOffset;\n\n  return [{\n    class: 'acen',\n    path: 'M' + (d.x2 + 2) + ',1' +\n            'L' + (d.x2 + d.o + 3.25) + ',1 ' +\n            'L' + (d.x2 + d.o + 3.25) + ',' + (d.w - 1) + ' ' +\n            'L' + (d.x2 + 2) + ',' + (d.w - 1)\n  }, {\n    class: 'gpos66',\n    path: 'M' + (d.x2 - d.o + 5) + ',0' +\n        'L' + (d.x2 - d.o + 3) + ',0 ' +\n        'L' + (d.x2 - d.o + 3) + ',' + d.w + ' ' +\n        'L' + (d.x2 - d.o + 5) + ',' + d.w,\n    strokeWidth: 0.5\n  }];\n};\n\nTelocentricChromosome.prototype._getQArmShape = function() {\n  var d = this._getShapeData(),\n    x = d.x3 - d.b,\n    o = this._pArmOffset + 3;\n\n  return {\n    class: '',\n    path:\n      'M' + (d.x2 + o) + ',0 ' +\n      'L' + x + ',0 ' +\n      'Q' + (d.x3 + d.b) + ',' + (d.w / 2) + ',' + x + ',' + d.w + ' ' +\n      'L' + (d.x2 + o) + ',' + d.w\n  };\n};\n","function MetacentricChromosome(model, config, ideo) {\n  Chromosome.call(this, model, config, ideo);\n  this._class = 'MetacentricChromosome';\n}\n\nMetacentricChromosome.prototype = Object.create(Chromosome.prototype);\n","// https://github.com/stefanpenner/es6-promise\n(function(){\"use strict\";function t(t){return\"function\"==typeof t||\"object\"==typeof t&&null!==t}function e(t){return\"function\"==typeof t}function n(t){G=t}function r(t){Q=t}function o(){return function(){process.nextTick(a)}}function i(){return function(){B(a)}}function s(){var t=0,e=new X(a),n=document.createTextNode(\"\");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){t.port2.postMessage(0)}}function c(){return function(){setTimeout(a,1)}}function a(){for(var t=0;J>t;t+=2){var e=tt[t],n=tt[t+1];e(n),tt[t]=void 0,tt[t+1]=void 0}J=0}function f(){try{var t=require,e=t(\"vertx\");return B=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[rt]&&k(r);var o=n._state;if(o){var i=arguments[o-1];Q(function(){x(o,r,i,n._result)})}else E(n,r,t,e);return r}function h(t){var e=this;if(t&&\"object\"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function _(){return new TypeError(\"You cannot resolve a promise with itself\")}function d(){return new TypeError(\"A promises callback cannot return that same promise.\")}function v(t){try{return t.then}catch(e){return ut.error=e,ut}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){Q(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},\"Settle: \"+(t._label||\" unknown promise\"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===it?S(t,e._result):e._state===st?j(t,e._result):E(e,void 0,function(e){g(t,e)},function(e){j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===et&&constructor.resolve===nt?b(t,n):r===ut?j(t,ut.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,_()):t(n)?w(e,n,v(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===ot&&(t._result=e,t._state=it,0!==t._subscribers.length&&Q(T,t))}function j(t,e){t._state===ot&&(t._state=st,t._result=e,Q(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+it]=n,o[i+st]=r,0===i&&t._state&&Q(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function P(t,e){try{return t(e)}catch(n){return ct.error=n,ct}}function x(t,n,r,o){var i,s,u,c,a=e(r);if(a){if(i=P(r,o),i===ct?(c=!0,s=i.error,i=null):u=!0,n===i)return void j(n,d())}else i=o,u=!0;n._state!==ot||(a&&u?g(n,i):c?j(n,s):t===it?S(n,i):t===st&&j(n,i))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function O(){return at++}function k(t){t[rt]=at++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t){return new _t(this,t).promise}function q(t){var e=this;return new e(I(t)?function(n,r){for(var o=t.length,i=0;o>i;i++)e.resolve(t[i]).then(n,r)}:function(t,e){e(new TypeError(\"You must pass an array to race.\"))})}function F(t){var e=this,n=new e(p);return j(n,t),n}function D(){throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\")}function K(){throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\")}function L(t){this[rt]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&(\"function\"!=typeof t&&D(),this instanceof L?C(this,t):K())}function N(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[rt]||k(this.promise),I(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,U())}function U(){return new Error(\"Array Methods must be provided an Array\")}function W(){var t;if(\"undefined\"!=typeof global)t=global;else if(\"undefined\"!=typeof self)t=self;else try{t=Function(\"return this\")()}catch(e){throw new Error(\"polyfill failed because global object is unavailable in this environment\")}var n=t.Promise;(!n||\"[object Promise]\"!==Object.prototype.toString.call(n.resolve())||n.cast)&&(t.Promise=pt)}var z;z=Array.isArray?Array.isArray:function(t){return\"[object Array]\"===Object.prototype.toString.call(t)};var B,G,H,I=z,J=0,Q=function(t,e){tt[J]=t,tt[J+1]=e,J+=2,2===J&&(G?G(a):H())},R=\"undefined\"!=typeof window?window:void 0,V=R||{},X=V.MutationObserver||V.WebKitMutationObserver,Z=\"undefined\"==typeof self&&\"undefined\"!=typeof process&&\"[object process]\"==={}.toString.call(process),$=\"undefined\"!=typeof Uint8ClampedArray&&\"undefined\"!=typeof importScripts&&\"undefined\"!=typeof MessageChannel,tt=new Array(1e3);H=Z?o():X?s():$?u():void 0===R&&\"function\"==typeof require?f():c();var et=l,nt=h,rt=Math.random().toString(36).substring(16),ot=void 0,it=1,st=2,ut=new M,ct=new M,at=0,ft=Y,lt=q,ht=F,pt=L;L.all=ft,L.race=lt,L.resolve=nt,L.reject=ht,L._setScheduler=n,L._setAsap=r,L._asap=Q,L.prototype={constructor:L,then:et,\"catch\":function(t){return this.then(null,t)}};var _t=N;N.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ot&&t>n;n++)this._eachEntry(e[n],n)},N.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===nt){var o=v(t);if(o===et&&t._state!==ot)this._settledAt(t._state,e,t._result);else if(\"function\"!=typeof o)this._remaining--,this._result[e]=t;else if(n===pt){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},N.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===ot&&(this._remaining--,t===st?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},N.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(st,e,t)})};var dt=W,vt={Promise:pt,polyfill:dt};\"function\"==typeof define&&define.amd?define(function(){return vt}):\"undefined\"!=typeof module&&module.exports?module.exports=vt:\"undefined\"!=typeof this&&(this.ES6Promise=vt),dt()}).call(this);\n\n// https://github.com/kristw/d3.promise\n!function(a,b){\"function\"==typeof define&&define.amd?define([\"d3\"],b):\"object\"==typeof exports?module.exports=b(require(\"d3\")):a.d3.promise=b(a.d3)}(this,function(a){var b=function(){function b(a,b){return function(){var c=Array.prototype.slice.call(arguments);return new Promise(function(d,e){var f=function(a,b){return a?void e(Error(a)):void d(b)};b.apply(a,c.concat(f))})}}var c={};return[\"csv\",\"tsv\",\"json\",\"xml\",\"text\",\"html\",\"get\"].forEach(function(d){c[d]=b(a,a[d])}),c}();return a.promise=b,b});\n\n// https://github.com/overset/javascript-natural-sort\nfunction naturalSort(a,b){var q,r,c=/(^([+\\-]?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?(?=\\D|\\s|$))|^0x[\\da-fA-F]+$|\\d+)/g,d=/^\\s+|\\s+$/g,e=/\\s+/g,f=/(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,g=/^0x[0-9a-f]+$/i,h=/^0/,i=function(a){return(naturalSort.insensitive&&(\"\"+a).toLowerCase()||\"\"+a).replace(d,\"\")},j=i(a),k=i(b),l=j.replace(c,\"\\0$1\\0\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\0\"),m=k.replace(c,\"\\0$1\\0\").replace(/\\0$/,\"\").replace(/^\\0/,\"\").split(\"\\0\"),n=parseInt(j.match(g),16)||1!==l.length&&Date.parse(j),o=parseInt(k.match(g),16)||n&&k.match(f)&&Date.parse(k)||null,p=function(a,b){return(!a.match(h)||1==b)&&parseFloat(a)||a.replace(e,\" \").replace(d,\"\")||0};if(o){if(n<o)return-1;if(n>o)return 1}for(var s=0,t=l.length,u=m.length,v=Math.max(t,u);s<v;s++){if(q=p(l[s]||\"\",t),r=p(m[s]||\"\",u),isNaN(q)!==isNaN(r))return isNaN(q)?1:-1;if(/[^\\x00-\\x80]/.test(q+r)&&q.localeCompare){var w=q.localeCompare(r);return w/Math.abs(w)}if(q<r)return-1;if(q>r)return 1}}\n\n// e.g. \"Homo sapiens\" -> \"homo-sapiens\"\nfunction slugify(value){return value.toLowerCase().replace(' ', '-')};\n\n// http://stackoverflow.com/a/5624139\nfunction componentToHex(c) {\n    var hex = parseInt(c, 10).toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n}\nfunction rgbToHex(r, g, b) {\n    return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\n}\n","// Chromosome's view utility class\nfunction ChromosomeUtil(node) {\n  this._node = node;\n}\n\nChromosomeUtil.prototype.getLabel = function() {\n  var label =\n    d3\n      .select(this._node)\n      .select('text.chrLabel')\n      .text();\n  return label;\n};\n\n// Get chromosome set label\nChromosomeUtil.prototype.getSetLabel = function() {\n  var setLabel =\n    d3\n      .select(this._node.parentNode)\n      .select('text.chromosome-set-label')\n      .text();\n  return setLabel;\n};\n","// Developed by Eric Weitz (https://github.com/eweitz)\n\n/* Constructs a prototypal Ideogram class */\nvar Ideogram = function(config) {\n  var orientation,\n    chrWidth, chrHeight,\n    container, rect;\n\n  // Clone the config object, to allow multiple instantiations\n  // without picking up prior ideogram's settings\n  this.config = JSON.parse(JSON.stringify(config));\n\n  // TODO: Document this\n  this._bandsXOffset = 30;\n\n  this.debug = false;\n\n  if (!this.config.dataDir) {\n    this.config.dataDir = \"../data/bands/native/\";\n  }\n\n  if (!this.config.ploidy) {\n    this.config.ploidy = 1;\n  }\n\n  if (this.config.ploidy > 1) {\n    this.sexChromosomes = {};\n    if (!this.config.sex) {\n      // Default to 'male' per human, mouse reference genomes.\n      // TODO: The default sex value should probably be the heterogametic sex,\n      // i.e. whichever sex has allosomes that differ in morphology.\n      // In mammals and most insects that is the male.\n      // However, in birds and reptiles, that is female.\n      this.config.sex = 'male';\n    }\n    if (this.config.ploidy === 2 && !this.config.ancestors) {\n      this.config.ancestors = {M: \"#ffb6c1\", P: \"#add8e6\"};\n      this.config.ploidyDesc = \"MP\";\n    }\n  }\n\n  if (!this.config.container) {\n    this.config.container = \"body\";\n  }\n\n  this.selector = this.config.container + ' #_ideogram';\n\n  if (!this.config.resolution) {\n    this.config.resolution = 850;\n  }\n\n  if (\"showChromosomeLabels\" in this.config === false) {\n    this.config.showChromosomeLabels = true;\n  }\n\n  if (!this.config.orientation) {\n    orientation = \"vertical\";\n    this.config.orientation = orientation;\n  }\n\n  if (!this.config.chrHeight) {\n    container = this.config.container;\n    rect = document.querySelector(container).getBoundingClientRect();\n\n    if (orientation === \"vertical\") {\n      chrHeight = rect.height;\n    } else {\n      chrHeight = rect.width;\n    }\n\n    if (container === \"body\") {\n      chrHeight = 400;\n    }\n    this.config.chrHeight = chrHeight;\n  }\n\n  if (!this.config.chrWidth) {\n    chrWidth = 10;\n    chrHeight = this.config.chrHeight;\n\n    if (chrHeight < 900 && chrHeight > 500) {\n      chrWidth = Math.round(chrHeight / 40);\n    } else if (chrHeight >= 900) {\n      chrWidth = Math.round(chrHeight / 45);\n    }\n    this.config.chrWidth = chrWidth;\n  }\n\n  if (!this.config.chrMargin) {\n    if (this.config.ploidy === 1) {\n      this.config.chrMargin = 10;\n    } else {\n      // Defaults polyploid chromosomes to relatively small interchromatid gap\n      this.config.chrMargin = Math.round(this.config.chrWidth / 4);\n    }\n  }\n\n  if (!this.config.showBandLabels) {\n    this.config.showBandLabels = false;\n  }\n\n  if ('showFullyBanded' in this.config) {\n    this.config.showFullyBanded = this.config.showFullyBanded;\n  } else {\n    this.config.showFullyBanded = true;\n  }\n\n  if (!this.config.brush) {\n    this.config.brush = false;\n  }\n\n  if (!this.config.rows) {\n    this.config.rows = 1;\n  }\n\n  this.bump = Math.round(this.config.chrHeight / 125);\n  this.adjustedBump = false;\n  if (this.config.chrHeight < 200) {\n    this.adjustedBump = true;\n    this.bump = 4;\n  }\n\n  if (config.showBandLabels) {\n    this.config.chrMargin += 20;\n  }\n\n  if (config.chromosome) {\n    this.config.chromosomes = [config.chromosome];\n    if (\"showBandLabels\" in config === false) {\n      this.config.showBandLabels = true;\n    }\n    if (\"rotatable\" in config === false) {\n      this.config.rotatable = false;\n    }\n  }\n\n  if (!this.config.showNonNuclearChromosomes) {\n    this.config.showNonNuclearChromosomes = false;\n  }\n\n  this.initAnnotSettings();\n\n  this.config.chrMargin = (\n    this.config.chrMargin +\n    this.config.chrWidth +\n    this.config.annotTracksHeight * 2\n  );\n\n  if (config.onLoad) {\n    this.onLoadCallback = config.onLoad;\n  }\n\n  if (config.onDrawAnnots) {\n    this.onDrawAnnotsCallback = config.onDrawAnnots;\n  }\n\n  if (config.onBrushMove) {\n    this.onBrushMoveCallback = config.onBrushMove;\n  }\n\n  this.coordinateSystem = \"iscn\";\n\n  this.maxLength = {\n    bp: 0,\n    iscn: 0\n  };\n\n  // The E-Utilies In Depth: Parameters, Syntax and More:\n  // https://www.ncbi.nlm.nih.gov/books/NBK25499/\n  this.eutils = \"https://eutils.ncbi.nlm.nih.gov/entrez/eutils/\";\n  this.esearch = this.eutils + \"esearch.fcgi?retmode=json\";\n  this.esummary = this.eutils + \"esummary.fcgi?retmode=json\";\n  this.elink = this.eutils + \"elink.fcgi?retmode=json\";\n\n  this.organisms = {\n    9606: {\n      commonName: \"Human\",\n      scientificName: \"Homo sapiens\",\n      scientificNameAbbr: \"H. sapiens\",\n      assemblies: {\n        default: \"GCF_000001405.26\", // GRCh38\n        GRCh38: \"GCF_000001405.26\",\n        GRCh37: \"GCF_000001405.13\"\n      }\n    },\n    10090: {\n      commonName: \"Mouse\",\n      scientificName: \"Mus musculus\",\n      scientificNameAbbr: \"M. musculus\",\n      assemblies: {\n        default: \"GCF_000001635.20\"\n      }\n    },\n    4641: {\n      commonName: \"banana\",\n      scientificName: \"Musa acuminata\",\n      scientificNameAbbr: \"M. acuminata\",\n      assemblies: {\n        default: \"mock\"\n      }\n    }\n  };\n\n  // A flat array of chromosomes\n  // (this.chromosomes is an object of\n  // arrays of chromosomes, keyed by organism)\n  this.chromosomesArray = [];\n\n  this.bandsToShow = [];\n\n  this.chromosomes = {};\n  this.numChromosomes = 0;\n  this.bandData = {};\n\n  this.init();\n};\n\n/**\n* Gets chromosome band data from a\n* TSV file, or, if band data is prefetched, from an array\n*\n* UCSC: #chrom chromStart  chromEnd  name  gieStain\n* http://genome.ucsc.edu/cgi-bin/hgTables\n*  - group: Mapping and Sequencing\n*  - track: Chromosome Band (Ideogram)\n*\n* NCBI: #chromosome  arm band  iscn_start  iscn_stop bp_start  bp_stop stain density\n* ftp://ftp.ncbi.nlm.nih.gov/pub/gdp/ideogram_9606_GCF_000001305.14_550_V1\n*/\nIdeogram.prototype.getBands = function(content, taxid, chromosomes) {\n  var lines = {},\n    delimiter, tsvLines, columns, line, stain, chr,\n    i, init, tsvLinesLength, source,\n    start, stop, firstColumn, tmp;\n\n  if (content.slice(0, 8) === \"chrBands\") {\n    source = \"native\";\n  }\n\n  if (\n    chromosomes instanceof Array &&\n    typeof chromosomes[0] === 'object'\n  ) {\n    tmp = [];\n    for (i = 0; i < chromosomes.length; i++) {\n      tmp.push(chromosomes[i].name);\n    }\n    chromosomes = tmp;\n  }\n\n  if (typeof chrBands === \"undefined\" && source !== \"native\") {\n    delimiter = /\\t/;\n    tsvLines = content.split(/\\r\\n|\\n/);\n    init = 1;\n  } else {\n    delimiter = / /;\n    if (source === \"native\") {\n      tsvLines = eval(content);\n    } else {\n      tsvLines = content;\n    }\n    init = 0;\n  }\n\n  firstColumn = tsvLines[0].split(delimiter)[0];\n  if (firstColumn === '#chromosome') {\n    source = 'ncbi';\n  } else if (firstColumn === '#chrom') {\n    source = 'ucsc';\n  } else {\n    source = 'native';\n  }\n\n  tsvLinesLength = tsvLines.length;\n\n  if (source === 'ncbi' || source === 'native') {\n    for (i = init; i < tsvLinesLength; i++) {\n      columns = tsvLines[i].split(delimiter);\n\n      chr = columns[0];\n\n      if (\n        // If a specific set of chromosomes has been requested, and\n        // the current chromosome\n        typeof (chromosomes) !== \"undefined\" &&\n        chromosomes.indexOf(chr) === -1\n      ) {\n        continue;\n      }\n\n      if (chr in lines === false) {\n        lines[chr] = [];\n      }\n\n      stain = columns[7];\n      if (columns[8]) {\n        // For e.g. acen and gvar, columns[8] (density) is undefined\n        stain += columns[8];\n      }\n\n      line = {\n        chr: chr,\n        bp: {\n          start: parseInt(columns[5], 10),\n          stop: parseInt(columns[6], 10)\n        },\n        iscn: {\n          start: parseInt(columns[3], 10),\n          stop: parseInt(columns[4], 10)\n        },\n        px: {\n          start: -1,\n          stop: -1,\n          width: -1\n        },\n        name: columns[1] + columns[2],\n        stain: stain,\n        taxid: taxid\n      };\n\n      lines[chr].push(line);\n    }\n  } else if (source === 'ucsc') {\n    for (i = init; i < tsvLinesLength; i++) {\n      // #chrom chromStart  chromEnd  name  gieStain\n      // e.g. for fly:\n      // chr4\t69508\t108296\t102A1\tn/a\n      columns = tsvLines[i].split(delimiter);\n\n      if (columns[0] !== 'chr' + chromosomeName) {\n        continue;\n      }\n\n      stain = columns[4];\n      if (stain === 'n/a') {\n        stain = 'gpos100';\n      }\n      start = parseInt(columns[1], 10);\n      stop = parseInt(columns[2], 10);\n\n      line = {\n        chr: columns[0].split('chr')[1],\n        bp: {\n          start: start,\n          stop: stop\n        },\n        iscn: {\n          start: start,\n          stop: stop\n        },\n        px: {\n          start: -1,\n          stop: -1,\n          width: -1\n        },\n        name: columns[3],\n        stain: stain,\n        taxid: taxid\n      };\n\n      lines[chr].push(line);\n    }\n  }\n\n  return lines;\n};\n\n/**\n* Generates a model object for each chromosome\n* containing information on its name, DOM ID,\n* length in base pairs or ISCN coordinates,\n* cytogenetic bands, centromere position, etc.\n*/\nIdeogram.prototype.getChromosomeModel = function(bands, chromosome, taxid,\n  chrIndex) {\n  var chr = {},\n    band,\n    width, pxStop,\n    chrHeight = this.config.chrHeight,\n    maxLength = this.maxLength,\n    chrLength,\n    cs, hasBands;\n\n  cs = this.coordinateSystem;\n  hasBands = (typeof bands !== \"undefined\");\n\n  if (hasBands) {\n    chr.name = chromosome;\n    chr.length = bands[bands.length - 1][cs].stop;\n    chr.type = \"nuclear\";\n  } else {\n    chr = chromosome;\n  }\n\n  chr.chrIndex = chrIndex;\n\n  chr.id = \"chr\" + chr.name + \"-\" + taxid;\n\n  if (this.config.fullChromosomeLabels === true) {\n    var orgName = this.organisms[taxid].scientificNameAbbr;\n    chr.name = orgName + \" chr\" + chr.name;\n  }\n\n  chrLength = chr.length;\n\n  pxStop = 0;\n\n  if (hasBands) {\n    for (var i = 0; i < bands.length; i++) {\n      band = bands[i];\n      var csLength = band[cs].stop - band[cs].start;\n      width = chrHeight * chr.length / maxLength[cs] * csLength / chrLength;\n\n      bands[i].px = {start: pxStop, stop: pxStop + width, width: width};\n\n      pxStop = bands[i].px.stop;\n\n      if (hasBands && band.stain === \"acen\" && band.name[0] === \"p\") {\n        chr.pcenIndex = i;\n      }\n    }\n  } else {\n    pxStop = chrHeight * chr.length / maxLength[cs];\n  }\n\n  chr.width = pxStop;\n\n  chr.scale = {};\n\n  // TODO:\n  //\n  // A chromosome-level scale property is likely\n  // nonsensical for any chromosomes that have cytogenetic band data.\n  // Different bands tend to have ratios between number of base pairs\n  // and physical length.\n  //\n  // However, a chromosome-level scale property is likely\n  // necessary for chromosomes that do not have band data.\n  //\n  // This needs further review.\n  if (this.config.multiorganism === true) {\n    chr.scale.bp = 1;\n    // chr.scale.bp = band.iscn.stop / band.bp.stop;\n    chr.scale.iscn = chrHeight * chrLength / maxLength.bp;\n  } else {\n    chr.scale.bp = chrHeight / maxLength.bp;\n    if (hasBands) {\n      chr.scale.iscn = chrHeight / maxLength.iscn;\n    }\n  }\n  chr.bands = bands;\n\n  chr.centromerePosition = \"\";\n  if (\n    hasBands && bands[0].name[0] === 'p' && bands[1].name[0] === 'q' &&\n    bands[0].bp.stop - bands[0].bp.start < 2E6\n  ) {\n    // As with almost all mouse chromosome, chimpanzee chr22\n    chr.centromerePosition = \"telocentric\";\n\n    // Remove placeholder pter band\n    chr.bands = chr.bands.slice(1);\n  }\n\n  if (hasBands && chr.bands.length === 1) {\n    // Encountered when processing an assembly that has chromosomes with\n    // centromere data, but this chromosome does not.\n    // Example: chromosome F1 in Felis catus.\n    delete chr.bands;\n  }\n\n  return chr;\n};\n\n/**\n* Draws labels for each chromosome, e.g. \"1\", \"2\", \"X\".\n* If ideogram configuration has 'fullChromosomeLabels: True',\n* then labels includes name of taxon, which can help when\n* depicting orthologs.\n*/\nIdeogram.prototype.drawChromosomeLabels = function() {\n  var ideo = this;\n\n  var chromosomeLabelClass = ideo._layout.getChromosomeLabelClass();\n\n  var chrSetLabelXPosition = ideo._layout.getChromosomeSetLabelXPosition();\n  var chrSetLabelTranslate = ideo._layout.getChromosomeSetLabelTranslate();\n\n  // Append chromosomes set's labels\n  d3.selectAll(ideo.selector + \" .chromosome-set-container\")\n        .append(\"text\")\n        .data(ideo.chromosomesArray)\n        .attr(\"class\", 'chromosome-set-label ' + chromosomeLabelClass)\n        .attr(\"transform\", chrSetLabelTranslate)\n        .attr(\"x\", chrSetLabelXPosition)\n        .attr(\"y\", function(d, i) {\n          return ideo._layout.getChromosomeSetLabelYPosition(i);\n        })\n        .attr(\"text-anchor\", ideo._layout.getChromosomeSetLabelAnchor())\n        .each(function(d, i) {\n            // Get label lines\n          var lines;\n          if (d.name.indexOf(' ') === -1) {\n            lines = [d.name];\n          } else {\n            lines = d.name.match(/^(.*)\\s+([^\\s]+)$/).slice(1).reverse();\n          }\n\n          if (\n            'sex' in ideo.config &&\n            ideo.config.ploidy === 2 &&\n            i === ideo.sexChromosomes.index\n          ) {\n            if (ideo.config.sex === 'male') {\n              lines = ['XY'];\n            } else {\n              lines = ['XX'];\n            }\n          }\n\n          // Render label lines\n          d3.select(this).selectAll('tspan')\n            .data(lines)\n            .enter()\n            .append('tspan')\n            .attr('dy', function(d, i) {\n              return i * -1.2 + 'em';\n            })\n            .attr('x', ideo._layout.getChromosomeSetLabelXPosition())\n            .attr('class', function(a, i) {\n              var fullLabels = ideo.config.fullChromosomeLabels;\n              return i === 1 && fullLabels ? 'italic' : null;\n            }).text(String);\n        });\n\n  var setLabelTranslate = ideo._layout.getChromosomeSetLabelTranslate();\n\n  // Append chromosomes labels\n  d3.selectAll(ideo.selector + \" .chromosome-set-container\")\n        .each(function(a, chrSetNumber) {\n          d3.select(this).selectAll(\".chromosome\")\n                .append(\"text\")\n                .attr(\"class\", \"chrLabel\")\n                .attr(\"transform\", setLabelTranslate)\n                .attr(\"x\", function(d, i) {\n                  return ideo._layout.getChromosomeLabelXPosition(i);\n                }).attr(\"y\", function(d, i) {\n                  return ideo._layout.getChromosomeLabelYPosition(i);\n                }).text(function(d, chrNumber) {\n                  return ideo._ploidy.getAncestor(chrSetNumber, chrNumber);\n                }).attr(\"text-anchor\", \"middle\");\n        });\n};\n\n/**\n* Draws labels and stalks for cytogenetic bands.\n*\n* Band labels are text like \"p11.11\".\n* Stalks are small lines that visually connect labels to their bands.\n*/\nIdeogram.prototype.drawBandLabels = function(chromosomes) {\n  var i, chr, chrs, taxid, ideo, chrModel;\n\n  ideo = this;\n\n  chrs = [];\n\n  for (taxid in chromosomes) {\n    for (chr in chromosomes[taxid]) {\n      chrs.push(chromosomes[taxid][chr]);\n    }\n  }\n\n  var textOffsets = {};\n\n  chrIndex = 0;\n  for (i = 0; i < chrs.length; i++) {\n    chrIndex += 1;\n\n    chrModel = chrs[i];\n\n    chr = d3.select(ideo.selector + \" #\" + chrModel.id);\n\n    // var chrMargin = this.config.chrMargin * chrIndex,\n    //   lineY1, lineY2;\n    //\n    // lineY1 = chrMargin;\n    // lineY2 = chrMargin - 8;\n    //\n    // if (\n    //   chrIndex === 1 &&\n    //   \"perspective\" in this.config && this.config.perspective === \"comparative\"\n    // ) {\n    //   lineY1 += 18;\n    //   lineY2 += 18;\n    // }\n\n    textOffsets[chrModel.id] = [];\n\n    chr.selectAll(\"text\")\n      .data(chrModel.bands)\n      .enter()\n      .append(\"g\")\n        .attr(\"class\", function(d, i) {\n          return \"bandLabel bsbsl-\" + i;\n        })\n        .attr(\"transform\", function(d) {\n          var transform = ideo._layout.getChromosomeBandLabelTranslate(d, i);\n\n          var x = transform.x;\n          // var y = transform.y;\n\n          textOffsets[chrModel.id].push(x + 13);\n\n          return transform.translate;\n        })\n        .append(\"text\")\n        .attr('text-anchor', ideo._layout.getChromosomeBandLabelAnchor(i))\n        .text(function(d) {\n          return d.name;\n        });\n\n    // var adapter = ModelAdapter.getInstance(ideo.chromosomesArray[i]);\n    // var view = Chromosome.getInstance(adapter, ideo.config, ideo);\n\n    chr.selectAll(\"line.bandLabelStalk\")\n      .data(chrModel.bands)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", function(d, i) {\n        return \"bandLabelStalk bsbsl-\" + i;\n      })\n      .attr(\"transform\", function(d) {\n        var x, y;\n\n        x = ideo.round(d.px.start + d.px.width / 2);\n\n        textOffsets[chrModel.id].push(x + 13);\n        y = -10;\n\n        return \"translate(\" + x + \",\" + y + \")\";\n      })\n        .append(\"line\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", function() {\n          return ideo._layout.getChromosomeBandTickY1(i);\n        }).attr(\"x2\", 0)\n        .attr(\"y2\", function() {\n          return ideo._layout.getChromosomeBandTickY2(i);\n        });\n  }\n\n  for (i = 0; i < chrs.length; i++) {\n    chrModel = chrs[i];\n\n    var textsLength = textOffsets[chrModel.id].length,\n      overlappingLabelXRight,\n      index,\n      indexesToShow = [],\n      prevHiddenBoxIndex,\n      xLeft,\n      prevLabelXRight,\n      textPadding;\n\n    overlappingLabelXRight = 0;\n\n    textPadding = 5;\n\n    for (index = 0; index < textsLength; index++) {\n      // Ensures band labels don't overlap\n\n      xLeft = textOffsets[chrModel.id][index];\n\n      if (xLeft < overlappingLabelXRight + textPadding === false) {\n        indexesToShow.push(index);\n      } else {\n        prevHiddenBoxIndex = index;\n        overlappingLabelXRight = prevLabelXRight;\n        continue;\n      }\n\n      if (prevHiddenBoxIndex !== index) {\n        // This getBoundingClientRect() forces Chrome's\n        // 'Recalculate Style' and 'Layout', which takes 30-40 ms on Chrome.\n        // TODO: This forced synchronous layout would be nice to eliminate.\n        // prevTextBox = texts[index].getBoundingClientRect();\n        // prevLabelXRight = prevTextBox.left + prevTextBox.width;\n\n        // TODO: Account for number of characters in prevTextBoxWidth,\n        // maybe also zoom.\n        prevTextBoxLeft = textOffsets[chrModel.id][index];\n        prevTextBoxWidth = 36;\n\n        prevLabelXRight = prevTextBoxLeft + prevTextBoxWidth;\n      }\n\n      if (\n        xLeft < prevLabelXRight + textPadding\n      ) {\n        prevHiddenBoxIndex = index;\n        overlappingLabelXRight = prevLabelXRight;\n      } else {\n        indexesToShow.push(index);\n      }\n    }\n\n    var selectorsToShow = [],\n      ithLength = indexesToShow.length,\n      j;\n\n    for (j = 0; j < ithLength; j++) {\n      index = indexesToShow[j];\n      selectorsToShow.push(\"#\" + chrModel.id + \" .bsbsl-\" + index);\n    }\n\n    this.bandsToShow = this.bandsToShow.concat(selectorsToShow);\n  }\n};\n\n// Rotates chromosome labels by 90 degrees, e.g. upon clicking a chromosome to focus.\nIdeogram.prototype.rotateChromosomeLabels = function(chr, chrIndex,\n  orientation, scale) {\n  var chrMargin, chrWidth, ideo, x, y,\n    numAnnotTracks, scaleSvg, tracksHeight;\n\n  chrWidth = this.config.chrWidth;\n  chrMargin = this.config.chrMargin * chrIndex;\n  numAnnotTracks = this.config.numAnnotTracks;\n\n  ideo = this;\n\n  if (\n    typeof (scale) !== \"undefined\" &&\n    scale.hasOwnProperty(\"x\") &&\n    !(scale.x === 1 && scale.y === 1)\n  ) {\n    scaleSvg = \"scale(\" + scale.x + \",\" + scale.y + \")\";\n    x = -6;\n    y = (scale === \"\" ? -16 : -14);\n  } else {\n    x = -8;\n    y = -16;\n    scale = {x: 1, y: 1};\n    scaleSvg = \"\";\n  }\n\n  if (orientation === \"vertical\" || orientation === \"\") {\n    var ci = chrIndex - 1;\n\n    if (numAnnotTracks > 1 || orientation === \"\") {\n      ci -= 1;\n    }\n\n    chrMargin2 = -4;\n    if (ideo.config.showBandLabels === true) {\n      chrMargin2 = ideo.config.chrMargin + chrWidth + 26;\n    }\n\n    chrMargin = ideo.config.chrMargin * ci;\n\n    if (numAnnotTracks > 1 === false) {\n      chrMargin += 1;\n    }\n\n    y = chrMargin + chrMargin2;\n\n    chr.selectAll(\"text.chrLabel\")\n      .attr(\"transform\", scaleSvg)\n      .selectAll(\"tspan\")\n        .attr(\"x\", x)\n        .attr(\"y\", y);\n  } else {\n    chrIndex -= 1;\n\n    chrMargin2 = -chrWidth - 2;\n    if (ideo.config.showBandLabels === true) {\n      chrMargin2 = ideo.config.chrMargin + 8;\n    }\n\n    tracksHeight = ideo.config.annotTracksHeight;\n    if (ideo.config.annotationsLayout !== \"overlay\") {\n      tracksHeight *= 2;\n    }\n\n    chrMargin = ideo.config.chrMargin * chrIndex;\n    x = -(chrMargin + chrMargin2) + 3 + tracksHeight;\n    x /= scale.x;\n\n    chr.selectAll(\"text.chrLabel\")\n      .attr(\"transform\", \"rotate(-90)\" + scaleSvg)\n      .selectAll(\"tspan\")\n      .attr(\"x\", x)\n      .attr(\"y\", y);\n  }\n};\n\n/**\n* Rotates band labels by 90 degrees, e.g. upon clicking a chromosome to focus.\n*\n* This method includes proportional scaling, which ensures that\n* while the parent chromosome group is scaled strongly in one dimension to fill\n* available space, the text in the chromosome's band labels is\n* not similarly distorted, and remains readable.\n*/\nIdeogram.prototype.rotateBandLabels = function(chr, chrIndex, scale) {\n  var chrMargin, scaleSvg,\n    orientation, bandLabels,\n    ideo = this;\n\n  bandLabels = chr.selectAll(\".bandLabel\");\n\n  chrWidth = this.config.chrWidth;\n  chrMargin = this.config.chrMargin * chrIndex;\n\n  orientation = chr.attr(\"data-orientation\");\n\n  if (typeof (scale) === \"undefined\") {\n    scale = {x: 1, y: 1};\n    scaleSvg = \"\";\n  } else {\n    scaleSvg = \"scale(\" + scale.x + \",\" + scale.y + \")\";\n  }\n\n  if (\n    chrIndex === 1 &&\n    \"perspective\" in this.config && this.config.perspective === \"comparative\"\n  ) {\n    bandLabels\n      .attr(\"transform\", function(d) {\n        var x, y;\n        x = (8 - chrMargin) - 26;\n        y = ideo.round(2 + d.px.start + d.px.width / 2);\n        return \"rotate(-90)translate(\" + x + \",\" + y + \")\";\n      })\n      .selectAll(\"text\")\n        .attr(\"text-anchor\", \"end\");\n  } else if (orientation === \"vertical\") {\n    bandLabels\n      .attr(\"transform\", function(d) {\n        var x, y;\n        x = 8 - chrMargin;\n        y = ideo.round(2 + d.px.start + d.px.width / 2);\n        return \"rotate(-90)translate(\" + x + \",\" + y + \")\";\n      })\n      .selectAll(\"text\")\n        .attr(\"transform\", scaleSvg);\n  } else {\n    bandLabels\n      .attr(\"transform\", function(d) {\n        var x, y;\n        x = ideo.round(-8 * scale.x + d.px.start + d.px.width / 2);\n        y = chrMargin - 10;\n        return \"translate(\" + x + \",\" + y + \")\";\n      })\n      .selectAll(\"text\")\n        .attr(\"transform\", scaleSvg);\n\n    chr.selectAll(\".bandLabelStalk line\")\n      .attr(\"transform\", scaleSvg);\n  }\n};\n\nIdeogram.prototype.round = function(coord) {\n  // Rounds an SVG coordinates to two decimal places\n  // e.g. 42.1234567890 -> 42.12\n  // Per http://stackoverflow.com/a/9453447, below method is fastest\n  return Math.round(coord * 100) / 100;\n};\n\n/**\n* Renders all the bands and outlining boundaries of a chromosome.\n*/\nIdeogram.prototype.drawChromosome = function(chrModel, chrIndex, container, k) {\n  var chrMargin = this.config.chrMargin;\n\n    // Get chromosome model adapter class\n  var adapter = ModelAdapter.getInstance(chrModel);\n\n    // Append chromosome's container\n  var chromosome = container\n        .append(\"g\")\n        .attr(\"id\", chrModel.id)\n        .attr(\"class\", \"chromosome \" + adapter.getCssClass())\n        .attr(\"transform\", \"translate(0, \" + k * chrMargin + \")\");\n\n    // Render chromosome\n  return Chromosome.getInstance(adapter, this.config, this)\n        .render(chromosome, chrIndex, k);\n};\n\n/**\n* Rotates a chromosome 90 degrees and shows or hides all other chromosomes\n* Useful for focusing or defocusing a particular chromosome\n*/\nIdeogram.prototype.rotateAndToggleDisplay = function(chromosome) {\n  /*\n   * Do nothing if taxId not defined. But it should be defined.\n   * To fix that bug we should have a way to find chromosome set number.\n   */\n  if (!this.config.taxid) {\n    return;\n  }\n\n  var chrSetNumber =\n    Number(d3.select(chromosome.parentNode).attr('data-set-number'));\n\n  var chrNumber = Array.prototype.slice.call(\n          d3.select(chromosome.parentNode).selectAll(\"g.chromosome\")._groups[0]\n      ).indexOf(chromosome);\n\n  return this._layout.rotate(chrSetNumber, chrNumber, chromosome);\n};\n\n/**\n* Converts base pair coordinates to pixel offsets.\n* Bp-to-pixel scales differ among cytogenetic bands.\n*/\nIdeogram.prototype.convertBpToPx = function(chr, bp) {\n  var i, band, bpToIscnScale, iscn, px, offset, pxStart, pxLength, iscnStart,\n    iscnStop, iscnLength, bpStart, bpStop, bpLength;\n\n  for (i = 0; i < chr.bands.length; i++) {\n    band = chr.bands[i];\n\n    offset = this._bandsXOffset;\n    bpStart = band.bp.start;\n    bpStop = band.bp.stop;\n    bpLength = bpStop - bpStart;\n    iscnStart = band.iscn.start;\n    iscnStop = band.iscn.stop;\n    iscnLength = iscnStop - iscnStart;\n    pxStart = band.px.start;\n    pxLength = band.px.width;\n\n    if (bp >= bpStart && bp <= bpStop) {\n      bpToIscnScale = iscnLength / bpLength;\n      iscn = iscnStart + (bp - bpStart) * bpToIscnScale;\n\n      px = offset + pxStart + (pxLength * (iscn - iscnStart) / (iscnLength));\n\n      return px;\n    }\n  }\n\n  throw new Error(\n    \"Base pair out of range.  \" +\n    \"bp: \" + bp + \"; length of chr\" + chr.name + \": \" + band.bp.stop\n  );\n};\n\n/**\n* Converts base pair coordinates to pixel offsets.\n* Bp-to-pixel scales differ among cytogenetic bands.\n*/\nIdeogram.prototype.convertPxToBp = function(chr, px) {\n  var i, band, pxToIscnScale, iscn,\n    pxStart, pxStop, iscnStart, iscnStop, bpLength, iscnLength;\n\n  for (i = 0; i < chr.bands.length; i++) {\n    band = chr.bands[i];\n\n    pxStart = band.px.start;\n    pxStop = band.px.stop;\n    iscnStart = band.iscn.start;\n    iscnStop = band.iscn.stop;\n\n    if (px >= pxStart && px <= pxStop) {\n      iscnLength = iscnStop - iscnStart;\n      pxLength = pxStop - pxStart;\n      bpLength = band.bp.stop - band.bp.start;\n\n      pxToIscnScale = iscnLength / pxLength;\n      iscn = iscnStart + (px - pxStart) * pxToIscnScale;\n\n      bp = band.bp.start + (bpLength * (iscn - iscnStart) / iscnLength);\n\n      return Math.round(bp);\n    }\n  }\n\n  throw new Error(\n    \"Pixel out of range.  \" +\n    \"px: \" + bp + \"; length of chr\" + chr.name + \": \" + pxStop\n  );\n};\n\n/**\n* Draws a trapezoid connecting a genomic range on\n* one chromosome to a genomic range on another chromosome;\n* a syntenic region.\n*/\nIdeogram.prototype.drawSynteny = function(syntenicRegions) {\n  var t0 = new Date().getTime();\n\n  var r1, r2,\n    syntenies,\n    i, color, opacity,\n    regionID,\n    ideo = this;\n\n  syntenies = d3.select(ideo.selector)\n    .insert(\"g\", \":first-child\")\n    .attr(\"class\", \"synteny\");\n\n  for (i = 0; i < syntenicRegions.length; i++) {\n    regions = syntenicRegions[i];\n\n    r1 = regions.r1;\n    r2 = regions.r2;\n\n    color = \"#CFC\";\n    if (\"color\" in regions) {\n      color = regions.color;\n    }\n\n    opacity = 1;\n    if (\"opacity\" in regions) {\n      opacity = regions.opacity;\n    }\n\n    r1.startPx = this.convertBpToPx(r1.chr, r1.start);\n    r1.stopPx = this.convertBpToPx(r1.chr, r1.stop);\n    r2.startPx = this.convertBpToPx(r2.chr, r2.start);\n    r2.stopPx = this.convertBpToPx(r2.chr, r2.stop);\n\n    regionID = (\n      r1.chr.id + \"_\" + r1.start + \"_\" + r1.stop + \"_\" +\n      \"__\" +\n      r2.chr.id + \"_\" + r2.start + \"_\" + r2.stop\n    );\n\n    syntenicRegion = syntenies.append(\"g\")\n      .attr(\"class\", \"syntenicRegion\")\n      .attr(\"id\", regionID)\n      .on(\"click\", function() {\n        var activeRegion = this;\n        var others = d3.selectAll(ideo.selector + \" .syntenicRegion\")\n          .filter(function() {\n            return (this !== activeRegion);\n          });\n\n        others.classed(\"hidden\", !others.classed(\"hidden\"));\n      })\n      .on(\"mouseover\", function() {\n        var activeRegion = this;\n        d3.selectAll(ideo.selector + \" .syntenicRegion\")\n          .filter(function() {\n            return (this !== activeRegion);\n          })\n          .classed(\"ghost\", true);\n      })\n      .on(\"mouseout\", function() {\n        d3.selectAll(ideo.selector + \" .syntenicRegion\")\n          .classed(\"ghost\", false);\n      });\n\n    var x1 = this._layout.getChromosomeSetYTranslate(0);\n    var x2 = this._layout.getChromosomeSetYTranslate(1) - ideo.config.chrWidth;\n\n    syntenicRegion.append(\"polygon\")\n      .attr(\"points\",\n        x1 + ', ' + r1.startPx + ' ' +\n        x1 + ', ' + r1.stopPx + ' ' +\n        x2 + ', ' + r2.stopPx + ' ' +\n        x2 + ', ' + r2.startPx\n      )\n      .attr('style', \"fill: \" + color + \"; fill-opacity: \" + opacity);\n\n    syntenicRegion.append(\"line\")\n      .attr(\"class\", \"syntenyBorder\")\n      .attr(\"x1\", x1)\n      .attr(\"x2\", x2)\n      .attr(\"y1\", r1.startPx)\n      .attr(\"y2\", r2.startPx);\n\n    syntenicRegion.append(\"line\")\n      .attr(\"class\", \"syntenyBorder\")\n      .attr(\"x1\", x1)\n      .attr(\"x2\", x2)\n      .attr(\"y1\", r1.stopPx)\n      .attr(\"y2\", r2.stopPx);\n  }\n\n  var t1 = new Date().getTime();\n  if (ideo.debug) {\n    console.log(\"Time in drawSyntenicRegions: \" + (t1 - t0) + \" ms\");\n  }\n};\n\n/**\n* Initializes various annotation settings.  Constructor help function.\n*/\nIdeogram.prototype.initAnnotSettings = function() {\n  if (this.config.annotationsPath || this.config.localAnnotationsPath ||\n    this.annots || this.config.annotations) {\n    if (!this.config.annotationHeight) {\n      var annotHeight = Math.round(this.config.chrHeight / 100);\n      this.config.annotationHeight = annotHeight;\n    }\n\n    if (this.config.annotationTracks) {\n      this.config.numAnnotTracks = this.config.annotationTracks.length;\n    } else {\n      this.config.numAnnotTracks = 1;\n    }\n    this.config.annotTracksHeight =\n      this.config.annotationHeight * this.config.numAnnotTracks;\n\n    if (typeof this.config.barWidth === \"undefined\") {\n      this.config.barWidth = 3;\n    }\n  } else {\n    this.config.annotTracksHeight = 0;\n  }\n\n  if (typeof this.config.annotationsColor === \"undefined\") {\n    this.config.annotationsColor = \"#F00\";\n  }\n};\n\n\n/*\n* Parses a BED file, returns raw annotations\n* BED documentation: https://genome.ucsc.edu/FAQ/FAQformat#format1\n*/\nIdeogram.prototype.parseBed = function(bed) {\n\n  var tsvLines, i, columns, chrs, chr, start, stop, chrIndex, annots, annot,\n    chrs, annots, bedStartIndex, ucscStyle, rgb, color;\n\n  annots = [];\n\n  // Horrible.  Remove hard-coding.\n  chrs = [\n    \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\",\n    \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\",\n    \"21\", \"22\", \"X\", \"Y\"\n  ];\n\n  for (i = 0; i < chrs.length; i++) {\n    chr = chrs[i];\n    annots.push({\"chr\": chr, \"annots\": []});\n  }\n\n  tsvLines = bed.split(/\\r\\n|\\n/);\n\n  bedStartIndex = 0; // 1 if BED has header (i.e. track line), 0 otherwise\n  ucscStyle = true;\n  if (tsvLines[0].slice(0,3) === 'chr' || isNaN(parseInt(tsvLines[0]))) {\n    bedStartIndex = 1;\n  }\n\n  if (isNaN(parseInt(tsvLines[bedStartIndex])) === false) {\n    ucscStyle = false;\n  }\n\n  for (i = bedStartIndex; i < tsvLines.length; i++) {\n    columns = tsvLines[i].split(/\\s/g);\n\n    // These three columns (i.e. fields) are required\n    chr = columns[0];\n    start = parseInt(columns[1], 10);\n    stop = parseInt(columns[2], 10);\n\n    length = stop - start;\n\n    if (ucscStyle) {\n      chr = chr.slice(3);\n    }\n    chrIndex = chrs.indexOf(chr);\n    if (chrIndex === -1) {\n      continue;\n    }\n    annot = [\"\", start, length, 0];\n\n    if (columns.length >= 4) {\n      label = columns[3];\n      annot[0] = label;\n    }\n\n    if (columns.length >= 8) {\n      rgb = columns[8].split(',');\n      color = rgbToHex(rgb[0], rgb[1], rgb[2]);\n      annot.push(color)\n    }\n\n    annots[chrIndex][\"annots\"].push(annot);\n  }\n  keys = ['name', 'start', 'length', 'trackIndex'];\n  if (tsvLines[bedStartIndex].length >= 8) {\n    keys.push('color');\n  }\n  rawAnnots = {\n    keys: keys,\n    annots: annots\n  };\n  return rawAnnots;\n}\n\nIdeogram.prototype.fetchAnnots = function(annotsUrl) {\n\n  var ideo = this;\n\n  if (annotsUrl.slice(0, 4) !== 'http') {\n    d3.json(\n      ideo.config.annotationsPath,\n      function(data) {\n        ideo.rawAnnots = data;\n      }\n    );\n    return;\n  }\n\n  var tmp = annotsUrl.split('.');\n  var extension = tmp[tmp.length - 1];\n\n  if (extension !== 'bed') {\n    extension = extension.toUpperCase();\n    alert(\n      'This Ideogram.js feature is very new, and only supports BED at the ' +\n      'moment.  Sorry, check back soon for ' + extension + ' support!'\n    );\n    return;\n  }\n\n  d3.request(annotsUrl, function(data) {\n    ideo.rawAnnots = ideo.parseBed(data.response);\n  });\n\n}\n\n/**\n* Draws annotations defined by user\n*/\nIdeogram.prototype.drawAnnots = function(friendlyAnnots) {\n  var ideo = this,\n    i, j, annot,\n    rawAnnots = [],\n    rawAnnot, keys,\n    chr,\n    chrs = ideo.chromosomes[ideo.config.taxid]; // TODO: multiorganism\n\n  // Occurs when filtering\n  if (\"annots\" in friendlyAnnots[0]) {\n    return ideo.drawProcessedAnnots(friendlyAnnots);\n  }\n\n  for (chr in chrs) {\n    rawAnnots.push({chr: chr, annots: []});\n  }\n\n  for (i = 0; i < friendlyAnnots.length; i++) {\n    annot = friendlyAnnots[i];\n\n    for (j = 0; j < rawAnnots.length; j++) {\n      if (annot.chr === rawAnnots[j].chr) {\n        rawAnnot = [\n          annot.name,\n          annot.start,\n          annot.stop - annot.start\n        ];\n        if (\"color\" in annot) {\n          rawAnnot.push(annot.color);\n        }\n        if (\"shape\" in annot) {\n          rawAnnot.push(annot.shape);\n        }\n        rawAnnots[j].annots.push(rawAnnot);\n        break;\n      }\n    }\n  }\n\n  keys = [\"name\", \"start\", \"length\"];\n  if (\"color\" in friendlyAnnots[0]) {\n    keys.push(\"color\");\n  }\n  if (\"shape\" in friendlyAnnots[0]) {\n    keys.push(\"shape\");\n  }\n  ideo.rawAnnots = {keys: keys, annots: rawAnnots};\n\n  ideo.annots = ideo.processAnnotData(ideo.rawAnnots);\n\n  ideo.drawProcessedAnnots(ideo.annots);\n};\n\n/**\n* Proccesses genome annotation data.\n* Genome annotations represent features like a gene, SNP, etc. as\n* a small graphical object on or beside a chromosome.\n* Converts raw annotation data from server, which is structured as\n* an array of arrays, into a more verbose data structure consisting\n* of an array of objects.\n* Also adds pixel offset information.\n*/\nIdeogram.prototype.processAnnotData = function(rawAnnots) {\n  var keys,\n    i, j, annot, annots, annotsByChr,\n    chr,\n    chrModel, ra,\n    startPx, stopPx, px,\n    color,\n    ideo = this;\n\n  keys = rawAnnots.keys;\n  rawAnnots = rawAnnots.annots;\n\n  annots = [];\n\n  for (i = 0; i < rawAnnots.length; i++) {\n    annotsByChr = rawAnnots[i];\n\n    annots.push({chr: annotsByChr.chr, annots: []});\n\n    for (j = 0; j < annotsByChr.annots.length; j++) {\n      chr = annotsByChr.chr;\n      ra = annotsByChr.annots[j];\n      annot = {};\n\n      for (var k = 0; k < keys.length; k++) {\n        annot[keys[k]] = ra[k];\n      }\n\n      annot.stop = annot.start + annot.length;\n\n      chrModel = ideo.chromosomes[ideo.config.taxid][chr];\n\n      startPx = ideo.convertBpToPx(chrModel, annot.start);\n      stopPx = ideo.convertBpToPx(chrModel, annot.stop);\n\n      px = Math.round((startPx + stopPx) / 2) - 28;\n\n      color = ideo.config.annotationsColor;\n      if (ideo.config.annotationTracks) {\n        annot.trackIndex = ra[3];\n        color = ideo.config.annotationTracks[annot.trackIndex].color;\n      } else {\n        annot.trackIndex = 0;\n      }\n\n      if ('color' in annot) {\n        color = annot.color;\n      }\n\n      annot.chr = chr;\n      annot.chrIndex = i;\n      annot.px = px;\n      annot.startPx = startPx - 30;\n      annot.stopPx = stopPx - 30;\n      annot.color = color;\n\n      annots[i].annots.push(annot);\n    }\n  }\n\n  return annots;\n};\n\n/*\n* Can be used for bar chart or sparkline\n*/\nIdeogram.prototype.getHistogramBars = function(annots) {\n  var t0 = new Date().getTime();\n\n  var i, j, chr,\n    chrModels, chrPxStop, px,\n    chrAnnots, chrName, chrIndex, annot,\n    bars, bar, barPx, nextBarPx, barWidth,\n    maxAnnotsPerBar, color,\n    firstGet = false,\n    histogramScaling,\n    ideo = this;\n\n  bars = [];\n\n  barWidth = ideo.config.barWidth;\n  chrModels = ideo.chromosomes[ideo.config.taxid];\n  color = ideo.config.annotationsColor;\n\n  if (\"histogramScaling\" in ideo.config) {\n    histogramScaling = ideo.config.histogramScaling;\n  } else {\n    histogramScaling = \"relative\";\n  }\n\n  if (typeof ideo.maxAnnotsPerBar === \"undefined\") {\n    ideo.maxAnnotsPerBar = {};\n    firstGet = true;\n  }\n\n  for (chr in chrModels) {\n    chrModel = chrModels[chr];\n    chrIndex = chrModel.chrIndex;\n    lastBand = chrModel.bands[chrModel.bands.length - 1];\n    chrPxStop = lastBand.px.stop;\n    numBins = Math.round(chrPxStop / barWidth);\n    bar = {chr: chr, annots: []};\n    for (i = 0; i < numBins; i++) {\n      px = i * barWidth - ideo.bump;\n      bp = ideo.convertPxToBp(chrModel, px + ideo.bump);\n      bar.annots.push({\n        bp: bp,\n        px: px - ideo.bump,\n        count: 0,\n        chrIndex: chrIndex,\n        chrName: chr,\n        color: color,\n        annots: []\n      });\n    }\n    bars.push(bar);\n  }\n\n  for (chr in annots) {\n    chrAnnots = annots[chr].annots;\n    chrName = annots[chr].chr;\n    chrModel = chrModels[chrName];\n    chrIndex = chrModel.chrIndex - 1;\n    barAnnots = bars[chrIndex].annots;\n    for (i = 0; i < chrAnnots.length; i++) {\n      annot = chrAnnots[i];\n      px = annot.px - ideo.bump;\n      for (j = 0; j < barAnnots.length; j++) {\n        barPx = barAnnots[j].px;\n        nextBarPx = barPx + barWidth;\n        if (j === barAnnots.length - 1) {\n          nextBarPx += barWidth;\n        }\n        if (px >= barPx && px < nextBarPx) {\n          bars[chrIndex].annots[j].count += 1;\n          bars[chrIndex].annots[j].annots.push(annot);\n          break;\n        }\n      }\n    }\n  }\n\n  if (firstGet === true || histogramScaling === \"relative\") {\n    maxAnnotsPerBar = 0;\n    for (i = 0; i < bars.length; i++) {\n      annots = bars[i].annots;\n      for (j = 0; j < annots.length; j++) {\n        barCount = annots[j].count;\n        if (barCount > maxAnnotsPerBar) {\n          maxAnnotsPerBar = barCount;\n        }\n      }\n    }\n    ideo.maxAnnotsPerBar[chr] = maxAnnotsPerBar;\n  }\n\n  // Set each bar's height to be proportional to\n  // the height of the bar with the most annotations\n  for (i = 0; i < bars.length; i++) {\n    annots = bars[i].annots;\n    for (j = 0; j < annots.length; j++) {\n      barCount = annots[j].count;\n      height = (barCount / ideo.maxAnnotsPerBar[chr]) * ideo.config.chrMargin;\n      // console.log(height)\n      bars[i].annots[j].height = height;\n    }\n  }\n\n  var t1 = new Date().getTime();\n  if (ideo.debug) {\n    console.log(\"Time spent in getHistogramBars: \" + (t1 - t0) + \" ms\");\n  }\n\n  ideo.bars = bars;\n\n  return bars;\n};\n\n/**\n* Fills out annotations data structure such that its top-level list of arrays\n* matches that of this ideogram's chromosomes list in order and number\n* Fixes https://github.com/eweitz/ideogram/issues/66\n*/\nIdeogram.prototype.fillAnnots = function(annots) {\n  var filledAnnots, chrs, chrArray, i, chr, annot, chrIndex;\n\n  filledAnnots = [];\n  chrs = [];\n  chrArray = this.chromosomesArray;\n\n  for (i = 0; i < chrArray.length; i++) {\n    chr = chrArray[i].name;\n    chrs.push(chr);\n    filledAnnots.push({chr: chr, annots: []});\n  }\n\n  for (i = 0; i < annots.length; i++) {\n    annot = annots[i];\n    chrIndex = chrs.indexOf(annot.chr);\n    if (chrIndex !== -1) {\n      filledAnnots[chrIndex] = annot;\n    }\n  }\n\n  return filledAnnots;\n};\n\n/**\n* Draws genome annotations on chromosomes.\n* Annotations can be rendered as either overlaid directly\n* on a chromosome, or along one or more \"tracks\"\n* running parallel to each chromosome.\n*/\nIdeogram.prototype.drawProcessedAnnots = function(annots) {\n  var chrWidth, layout,\n    annotHeight, triangle, circle, r, chrAnnot,\n    x1, x2, y1, y2,\n    filledAnnots,\n    ideo = this;\n\n  chrMargin = this.config.chrMargin;\n  chrWidth = this.config.chrWidth;\n\n  layout = \"tracks\";\n  if (this.config.annotationsLayout) {\n    layout = this.config.annotationsLayout;\n  }\n\n  if (layout === \"histogram\") {\n    annots = ideo.getHistogramBars(annots);\n  }\n\n  annotHeight = ideo.config.annotationHeight;\n\n  triangle =\n    'l -' + annotHeight + ' ' +\n    (2 * annotHeight) +\n    ' l ' + (2 * annotHeight) + ' 0 z';\n\n  // From http://stackoverflow.com/a/10477334, with a minor change (\"m -r, r\")\n  // Circles are supported natively via <circle>, but having it as a path\n  // simplifies handling triangles, circles and other shapes in the same\n  // D3 call\n  r = annotHeight;\n  circle =\n    'm -' + r + ', ' + r +\n    'a ' + r + ',' + r + ' 0 1,0 ' + (r * 2) + ',0' +\n    'a ' + r + ',' + r + ' 0 1,0 -' + (r * 2) + ',0';\n\n  filledAnnots = ideo.fillAnnots(annots);\n\n  chrAnnot = d3.selectAll(ideo.selector + \" .chromosome\")\n    .data(filledAnnots)\n      .selectAll(\"path.annot\")\n      .data(function(d) {\n        return d.annots;\n      })\n      .enter();\n\n  if (layout === \"tracks\") {\n    chrAnnot\n      .append(\"g\")\n      .attr(\"id\", function(d) {\n        return d.id;\n      })\n      .attr(\"class\", \"annot\")\n      .attr(\"transform\", function(d) {\n        var y = ideo.config.chrWidth + (d.trackIndex * annotHeight * 2);\n        return \"translate(\" + d.px + \",\" + y + \")\";\n      })\n      .append(\"path\")\n      .attr(\"d\", function(d) {\n        if (!d.shape || d.shape === \"triangle\") {\n          return \"m0,0\" + triangle;\n        } else if (d.shape === \"circle\") {\n          return circle;\n        }\n      })\n      .attr(\"fill\", function(d) {\n        return d.color;\n      });\n  } else if (layout === \"overlay\") {\n      // Overlaid annotations appear directly on chromosomes\n\n    chrAnnot.append(\"polygon\")\n        .attr(\"id\", function(d) {\n          return d.id;\n        })\n        .attr(\"class\", \"annot\")\n        .attr(\"points\", function(d) {\n          if (d.stopPx - d.startPx > 1) {\n            x1 = d.startPx;\n            x2 = d.stopPx;\n          } else {\n            x1 = d.px - 0.5;\n            x2 = d.px + 0.5;\n          }\n          y1 = chrWidth;\n          y2 = 0;\n\n          return (\n            x1 + \",\" + y1 + \" \" +\n            x2 + \",\" + y1 + \" \" +\n            x2 + \",\" + y2 + \" \" +\n            x1 + \",\" + y2\n          );\n        })\n        .attr(\"fill\", function(d) {\n          return d.color;\n        });\n  } else if (layout === \"histogram\") {\n    chrAnnot.append(\"polygon\")\n        // .attr(\"id\", function(d, i) { return d.id; })\n        .attr(\"class\", \"annot\")\n        .attr(\"points\", function(d) {\n          x1 = d.px + ideo.bump;\n          x2 = d.px + ideo.config.barWidth + ideo.bump;\n          y1 = chrWidth;\n          y2 = chrWidth + d.height;\n\n          var thisChrWidth = ideo.chromosomesArray[d.chrIndex - 1].width;\n\n          if (x2 > thisChrWidth) {\n            x2 = thisChrWidth;\n          }\n\n          return (\n            x1 + \",\" + y1 + \" \" +\n            x2 + \",\" + y1 + \" \" +\n            x2 + \",\" + y2 + \" \" +\n            x1 + \",\" + y2\n          );\n        })\n        .attr(\"fill\", function(d) {\n          return d.color;\n        });\n  }\n\n  if (ideo.onDrawAnnotsCallback) {\n    ideo.onDrawAnnotsCallback();\n  }\n};\n\nIdeogram.prototype.onBrushMove = function() {\n  call(this.onBrushMoveCallback);\n};\n\nIdeogram.prototype.createBrush = function(from, to) {\n  var ideo = this,\n    width = ideo.config.chrWidth + 6.5,\n    length = ideo.config.chrHeight,\n    chr = ideo.chromosomesArray[0],\n    chrLengthBp = chr.bands[chr.bands.length - 1].bp.stop,\n    x0, x1,\n    xOffset = this._layout.getMargin().left,\n    xScale = d3.scaleLinear()\n          .domain([0, d3.max(chr.bands, function(band) {\n            return band.bp.stop;\n          })]).range([xOffset, d3.max(chr.bands, function(band) {\n            return band.px.stop;\n          }) + xOffset]);\n\n  if (typeof from === \"undefined\") {\n    from = Math.floor(chrLengthBp / 10);\n  }\n\n  if (typeof right === \"undefined\") {\n    to = Math.ceil(from * 2);\n  }\n\n  x0 = ideo.convertBpToPx(chr, from);\n  x1 = ideo.convertBpToPx(chr, to);\n\n  ideo.selectedRegion = {from: from, to: to, extent: (to - from)};\n\n  ideo.brush = d3.brushX()\n    .extent([[xOffset, 0], [length + xOffset, width]])\n    .on(\"brush\", onBrushMove);\n\n  var yTranslate = this._layout.getChromosomeSetYTranslate(0);\n  var yOffset = yTranslate + (ideo.config.chrWidth - width) / 2;\n  d3.select(ideo.selector).append(\"g\")\n    .attr(\"class\", \"brush\")\n    .attr(\"transform\", \"translate(0, \" + yOffset + \")\")\n    .call(ideo.brush)\n    .call(ideo.brush.move, [x0, x1]);\n\n  function onBrushMove() {\n    var extent = d3.event.selection.map(xScale.invert),\n      from = Math.floor(extent[0]),\n      to = Math.ceil(extent[1]);\n\n    ideo.selectedRegion = {from: from, to: to, extent: (to - from)};\n\n    if (ideo.onBrushMove) {\n      ideo.onBrushMoveCallback();\n    }\n  }\n};\n\n/**\n* Called when Ideogram has finished initializing.\n* Accounts for certain ideogram properties not being set until\n* asynchronous requests succeed, etc.\n*/\nIdeogram.prototype.onLoad = function() {\n  call(this.onLoadCallback);\n};\n\nIdeogram.prototype.onDrawAnnots = function() {\n  call(this.onDrawAnnotsCallback);\n};\n\nIdeogram.prototype.getBandColorGradients = function() {\n  var colors,\n    stain, color1, color2, color3,\n    css,\n    gradients = \"\";\n\n  colors = [\n    [\"gneg\", \"#FFF\", \"#FFF\", \"#DDD\"],\n    [\"gpos25\", \"#C8C8C8\", \"#DDD\", \"#BBB\"],\n    [\"gpos33\", \"#BBB\", \"#BBB\", \"#AAA\"],\n    [\"gpos50\", \"#999\", \"#AAA\", \"#888\"],\n    [\"gpos66\", \"#888\", \"#888\", \"#666\"],\n    [\"gpos75\", \"#777\", \"#777\", \"#444\"],\n    [\"gpos100\", \"#444\", \"#666\", \"#000\"],\n    [\"acen\", \"#FEE\", \"#FEE\", \"#FDD\"],\n    [\"noBands\", \"#BBB\", \"#BBB\", \"#AAA\"]\n  ];\n\n  for (var i = 0; i < colors.length; i++) {\n    stain = colors[i][0];\n    color1 = colors[i][1];\n    color2 = colors[i][2];\n    color3 = colors[i][3];\n    gradients +=\n      '<linearGradient id=\"' + stain + '\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">';\n    if (stain === \"gneg\") {\n      gradients +=\n        '<stop offset=\"70%\" stop-color=\"' + color2 + '\" />' +\n        '<stop offset=\"95%\" stop-color=\"' + color3 + '\" />' +\n        '<stop offset=\"100%\" stop-color=\"' + color1 + '\" />';\n    } else {\n      gradients +=\n        '<stop offset=\"5%\" stop-color=\"' + color1 + '\" />' +\n        '<stop offset=\"15%\" stop-color=\"' + color2 + '\" />' +\n        '<stop offset=\"60%\" stop-color=\"' + color3 + '\" />';\n    }\n    gradients +=\n      '</linearGradient>';\n  }\n\n  gradients +=\n    '<pattern id=\"stalk\" width=\"2\" height=\"1\" patternUnits=\"userSpaceOnUse\" ' +\n      'patternTransform=\"rotate(30 0 0)\">' +\n      '<rect x=\"0\" y=\"0\" width=\"10\" height=\"2\" fill=\"#CCE\" /> ' +\n       '<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"100%\" style=\"stroke:#88B; ' +\n        'stroke-width:0.7;\" />' +\n    '</pattern>' +\n    '<pattern id=\"gvar\" width=\"2\" height=\"1\" patternUnits=\"userSpaceOnUse\" ' +\n      'patternTransform=\"rotate(-30 0 0)\">' +\n      '<rect x=\"0\" y=\"0\" width=\"10\" height=\"2\" fill=\"#DDF\" /> ' +\n       '<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"100%\" style=\"stroke:#99C; ' +\n          'stroke-width:0.7;\" />' +\n    '</pattern>';\n\n  gradients = \"<defs>\" + gradients + \"</defs>\";\n  css = \"<style>\" +\n    '.gneg {fill: url(\"#gneg\")} ' +\n    '.gpos25 {fill: url(\"#gpos25\")} ' +\n    '.gpos33 {fill: url(\"#gpos33\")} ' +\n    '.gpos50 {fill: url(\"#gpos50\")} ' +\n    '.gpos66 {fill: url(\"#gpos66\")} ' +\n    '.gpos75 {fill: url(\"#gpos75\")} ' +\n    '.gpos100 {fill: url(\"#gpos100\")} ' +\n    '.gpos {fill: url(\"#gpos100\")} ' +\n    '.acen {fill: url(\"#acen\")} ' +\n    '.stalk {fill: url(\"#stalk\")} ' +\n    '.gvar {fill: url(\"#gvar\")} ' +\n    '.noBands {fill: url(\"#noBands\")} ' +\n    '.chromosome {fill: url(\"#noBands\")} ' +\n  '</style>';\n  gradients = css + gradients;\n\n  // alert(gradients)\n\n  return gradients;\n};\n\n/*\n  Returns an NCBI taxonomy identifier (taxid) for the configured organism\n*/\nIdeogram.prototype.getTaxidFromEutils = function(callback) {\n  var organism, taxonomySearch, taxid,\n    ideo = this;\n\n  organism = ideo.config.organism;\n\n  taxonomySearch = ideo.esearch + \"&db=taxonomy&term=\" + organism;\n\n  d3.json(taxonomySearch, function(data) {\n    taxid = data.esearchresult.idlist[0];\n    return callback(taxid);\n  });\n};\n\n/**\n* Returns an array of taxids for the current ideogram\n* Also sets configuration parameters related to taxid(s), whether ideogram is\n* multiorganism, and adjusts chromosomes parameters as needed\n**/\nIdeogram.prototype.getTaxids = function(callback) {\n  var ideo = this,\n    taxid, taxids,\n    org, orgs, i,\n    taxidInit, tmpChrs,\n    assembly, chromosomes,\n    multiorganism;\n\n  taxidInit = \"taxid\" in ideo.config;\n\n  ideo.config.multiorganism = (\n    (\"organism\" in ideo.config && ideo.config.organism instanceof Array) ||\n    (taxidInit && ideo.config.taxid instanceof Array)\n  );\n\n  multiorganism = ideo.config.multiorganism;\n\n  if (\"organism\" in ideo.config) {\n    // Ideogram instance was constructed using common organism name(s)\n    if (multiorganism) {\n      orgs = ideo.config.organism;\n    } else {\n      orgs = [ideo.config.organism];\n    }\n\n    taxids = [];\n    tmpChrs = {};\n    for (i = 0; i < orgs.length; i++) {\n      // Gets a list of taxids from common organism names\n      org = orgs[i];\n      for (taxid in ideo.organisms) {\n        if (ideo.organisms[taxid].commonName.toLowerCase() === org) {\n          taxids.push(taxid);\n          if (multiorganism) {\n            // Adjusts 'chromosomes' configuration parameter to make object\n            // keys use taxid instead of common organism name\n            tmpChrs[taxid] = ideo.config.chromosomes[org];\n          }\n        }\n      }\n    }\n\n    if (taxids.length === 0) {\n      promise = new Promise(function(resolve) {\n        ideo.getTaxidFromEutils(resolve);\n      });\n\n      promise.then(function(data) {\n        var organism = ideo.config.organism,\n          dataDir = ideo.config.dataDir,\n          urlOrg = organism.replace(\" \", \"-\");\n\n        taxid = data;\n        taxids.push(taxid);\n\n        ideo.config.taxids = taxids;\n        ideo.organisms[taxid] = {\n          commonName: \"\",\n          scientificName: ideo.config.organism,\n          scientificNameAbbr: \"\"\n        };\n\n        var fullyBandedTaxids = ['9606', '10090', '10116'];\n        if (\n          fullyBandedTaxids.indexOf(taxid) !== -1 &&\n          ideo.config.showFullyBanded === false\n        ) {\n          urlOrg += '-no-bands';\n        }\n        var chromosomesUrl = dataDir + urlOrg + \".js\";\n\n        var promise = new Promise(function(resolve, reject) {\n          d3.request(chromosomesUrl).get(function(error, data) {\n            if (error) {\n              reject(Error(error));\n            }\n            resolve(data);\n          });\n        });\n\n        return promise\n          .then(\n            function(data) {\n              // Check if chromosome data exists locally.\n              // This is used for pre-processed centromere data,\n              // which is not accessible via EUtils.  See get_chromosomes.py.\n\n              var asmAndChrArray = [],\n                chromosomes = [],\n                seenChrs = {},\n                chr;\n\n              eval(data.response);\n\n              asmAndChrArray.push('');\n\n              for (var i = 0; i < chrBands.length; i++) {\n                chr = chrBands[i].split(' ')[0];\n                if (chr in seenChrs) {\n                  continue;\n                } else {\n                  chromosomes.push({name: chr, type: 'nuclear'});\n                  seenChrs[chr] = 1;\n                }\n              }\n              chromsomes = chromosomes.sort(ideo.sortChromosomes);\n              asmAndChrArray.push(chromosomes);\n              ideo.coordinateSystem = \"iscn\";\n              return asmAndChrArray;\n            },\n            function() {\n              return new Promise(function(resolve) {\n                ideo.coordinateSystem = \"bp\";\n                ideo.getAssemblyAndChromosomesFromEutils(resolve);\n              });\n            }\n          );\n      })\n      .then(function(asmChrArray) {\n        assembly = asmChrArray[0];\n        chromosomes = asmChrArray[1];\n\n        ideo.config.chromosomes = chromosomes;\n        ideo.organisms[taxid].assemblies = {\n          default: assembly\n        };\n\n        callback(taxids);\n      });\n    } else {\n      ideo.config.taxids = taxids;\n      if (multiorganism) {\n        ideo.config.chromosomes = tmpChrs;\n      }\n\n      callback(taxids);\n    }\n  } else {\n    if (multiorganism) {\n      ideo.coordinateSystem = \"bp\";\n      if (taxidInit) {\n        taxids = ideo.config.taxid;\n      }\n    } else {\n      if (taxidInit) {\n        taxids = [ideo.config.taxid];\n      }\n      ideo.config.taxids = taxids;\n    }\n\n    callback(taxids);\n  }\n};\n\nIdeogram.prototype.sortChromosomes = function(a, b) {\n  var aIsNuclear = a.type === \"nuclear\",\n    bIsNuclear = b.type === \"nuclear\",\n    aIsCP = a.type === \"chloroplast\",\n    bIsCP = b.type === \"chloroplast\",\n    aIsMT = a.type === \"mitochondrion\",\n    bIsMT = b.type === \"mitochondrion\";\n    // aIsPlastid = aIsMT && a.name !== \"MT\", // e.g. B1 in rice genome GCF_001433935.1\n    // bIsPlastid = bIsMT && b.name !== \"MT\";\n\n  if (aIsNuclear && bIsNuclear) {\n    return naturalSort(a.name, b.name);\n  } else if (!aIsNuclear && bIsNuclear) {\n    return 1;\n  } else if (aIsMT && bIsCP) {\n    return 1;\n  } else if (aIsCP && bIsMT) {\n    return -1;\n  } else if (!aIsMT && !aIsCP && (bIsMT || bIsCP)) {\n    return -1;\n  }\n};\n\n/**\n  Returns names and lengths of chromosomes for an organism's best-known\n  genome assembly.  Gets data from NCBI EUtils web API.\n*/\nIdeogram.prototype.getAssemblyAndChromosomesFromEutils = function(callback) {\n  var asmAndChrArray, // [assembly_accession, chromosome_objects_array]\n    assemblyAccession, chromosomes, asmSearch,\n    asmUid, asmSummary,\n    rsUid, nuccoreLink,\n    links, ntSummary,\n    results, result, cnIndex, chrName, chrLength, chromosome, type,\n    ideo = this;\n\n  organism = ideo.config.organism;\n\n  asmAndChrArray = [];\n  chromosomes = [];\n\n  asmSearch =\n    ideo.esearch +\n    \"&db=assembly\" +\n    \"&term=%22\" + organism + \"%22[organism]\" +\n      \"AND%20(%22latest%20refseq%22[filter])%20\" +\n      \"AND%20(%22chromosome%20level%22[filter]%20\" +\n      \"OR%20%22complete%20genome%22[filter])\";\n\n  var promise = d3.promise.json(asmSearch);\n\n  promise\n      .then(function(data) {\n        // NCBI Assembly database's internal identifier (uid) for this assembly\n        asmUid = data.esearchresult.idlist[0];\n        asmSummary = ideo.esummary + \"&db=assembly&id=\" + asmUid;\n\n        return d3.promise.json(asmSummary);\n      })\n      .then(function(data) {\n        // RefSeq UID for this assembly\n        rsUid = data.result[asmUid].rsuid;\n        assemblyAccession = data.result[asmUid].assemblyaccession;\n\n        asmAndChrArray.push(assemblyAccession);\n\n        // Get a list of IDs for the chromosomes in this genome.\n        //\n        // This information does not seem to be available from well-known\n        // NCBI databases like Assembly or Nucleotide, so we use GenColl,\n        // a lesser-known NCBI database.\n        var qs = \"&db=nuccore&linkname=gencoll_nuccore_chr&from_uid=\" + rsUid;\n        nuccoreLink = ideo.elink + qs;\n\n        return d3.promise.json(nuccoreLink);\n      })\n      .then(function(data) {\n        links = data.linksets[0].linksetdbs[0].links.join(\",\");\n        ntSummary = ideo.esummary + \"&db=nucleotide&id=\" + links;\n\n        return d3.promise.json(ntSummary);\n      })\n      .then(function(data) {\n        results = data.result;\n\n        for (var x in results) {\n          result = results[x];\n\n          // omit list of reult uids\n          if (x === \"uids\") {\n            continue;\n          }\n\n          if (result.genome === \"mitochondrion\") {\n            if (ideo.config.showNonNuclearChromosomes) {\n              type = result.genome;\n              cnIndex = result.subtype.split(\"|\").indexOf(\"plasmid\");\n              if (cnIndex === -1) {\n                chrName = \"MT\";\n              } else {\n                // Seen in e.g. rice genome IRGSP-1.0 (GCF_001433935.1),\n                // From https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?retmode=json&db=nucleotide&id=996703432,996703431,996703430,996703429,996703428,996703427,996703426,996703425,996703424,996703423,996703422,996703421,194033210,11466763,7524755\n                  // genome: \"mitochondrion\",\n                  // subtype: \"cell_line|plasmid\",\n                  // subname: \"A-58 CMS|B1\",\n                chrName = result.subname.split(\"|\")[cnIndex];\n              }\n            } else {\n              continue;\n            }\n          } else if (\n            result.genome === \"chloroplast\" ||\n            result.genome === \"plastid\"\n          ) {\n            type = \"chloroplast\";\n            // Plastid encountered with rice genome IRGSP-1.0 (GCF_001433935.1)\n            if (ideo.config.showNonNuclearChromosomes) {\n              chrName = \"CP\";\n            } else {\n              continue;\n            }\n          } else {\n            type = \"nuclear\";\n            cnIndex = result.subtype.split(\"|\").indexOf(\"chromosome\");\n\n            chrName = result.subname.split(\"|\")[cnIndex];\n\n            if (\n              typeof chrName !== \"undefined\" &&\n              chrName.substr(0, 3) === \"chr\"\n            ) {\n              // Convert \"chr12\" to \"12\", e.g. for banana (GCF_000313855.2)\n              chrName = chrName.substr(3);\n            }\n          }\n\n          chrLength = result.slen;\n\n          chromosome = {\n            name: chrName,\n            length: chrLength,\n            type: type\n          };\n\n          chromosomes.push(chromosome);\n        }\n\n        chromosomes = chromosomes.sort(ideo.sortChromosomes);\n        asmAndChrArray.push(chromosomes);\n\n        ideo.coordinateSystem = \"bp\";\n\n        return callback(asmAndChrArray);\n      });\n};\n\nIdeogram.prototype.drawSexChromosomes = function(bandsArray, taxid, container,\n  defs, j, chrs) {\n  var chromosome, bands, chrModel, shape, sci, k,\n    sexChromosomeIndexes,\n    ideo = this;\n\n  if (ideo.config.sex === 'male') {\n    sexChromosomeIndexes = [1, 0];\n  } else {\n    sexChromosomeIndexes = [0, 0];\n  }\n\n  for (k = 0; k < sexChromosomeIndexes.length; k++) {\n    sci = sexChromosomeIndexes[k] + j;\n    chromosome = chrs[sci];\n    bands = bandsArray[sci];\n    chrModel = ideo.getChromosomeModel(bands, chromosome, taxid, sci);\n    shape = ideo.drawChromosome(chrModel, j, container, k);\n    defs.append(\"clipPath\")\n      .attr(\"id\", chrModel.id + \"-chromosome-set-clippath\")\n      .selectAll('path')\n      .data(shape)\n      .enter()\n      .append('path')\n      .attr('d', function(d) {\n        return d.path;\n      }).attr('class', function(d) {\n        return d.class;\n      });\n  }\n};\n\nIdeogram.prototype.initDrawChromosomes = function(bandsArray) {\n  var ideo = this,\n    taxids = ideo.config.taxids,\n    ploidy = ideo.config.ploidy,\n    taxid,\n    chrIndex = 0,\n    chrSetNumber = 0,\n    bands,\n    i, j, chrs, chromosome, chrModel,\n    defs, transform;\n\n  defs = d3.select(ideo.selector + \" defs\");\n\n  for (i = 0; i < taxids.length; i++) {\n    taxid = taxids[i];\n    chrs = ideo.config.chromosomes[taxid];\n\n    ideo.chromosomes[taxid] = {};\n\n    ideo.setSexChromosomes(chrs);\n\n    for (j = 0; j < chrs.length; j++) {\n      chromosome = chrs[j];\n      bands = bandsArray[chrIndex];\n      chrIndex += 1;\n\n      chrModel = ideo.getChromosomeModel(bands, chromosome, taxid, chrIndex);\n\n      ideo.chromosomes[taxid][chromosome] = chrModel;\n      ideo.chromosomesArray.push(chrModel);\n\n      if (\n        'sex' in ideo.config &&\n        (\n          ploidy === 2 && ideo.sexChromosomes.index + 2 === chrIndex ||\n          ideo.config.sex === 'female' && chrModel.name === 'Y'\n        )\n      ) {\n        continue;\n      }\n\n      transform = ideo._layout.getChromosomeSetTranslate(chrSetNumber);\n      chrSetNumber += 1;\n\n      // Append chromosome set container\n      var container = d3.select(ideo.selector)\n        .append(\"g\")\n        .attr(\"class\", \"chromosome-set-container\")\n        .attr(\"data-set-number\", j)\n        .attr(\"transform\", transform)\n        .attr(\"id\", chrModel.id + \"-chromosome-set\");\n\n      if (\n          'sex' in ideo.config &&\n          ploidy === 2 &&\n          ideo.sexChromosomes.index + 1 === chrIndex\n      ) {\n        ideo.drawSexChromosomes(bandsArray, taxid, container, defs, j, chrs);\n        continue;\n      }\n\n      var shape;\n      var numChrsInSet = 1;\n      if (ploidy > 1) {\n        numChrsInSet = this._ploidy.getChromosomesNumber(j);\n      }\n      for (var k = 0; k < numChrsInSet; k++) {\n        shape = ideo.drawChromosome(chrModel, chrIndex - 1, container, k);\n      }\n\n      defs.append(\"clipPath\")\n        .attr(\"id\", chrModel.id + \"-chromosome-set-clippath\")\n        .selectAll('path')\n        .data(shape)\n        .enter()\n        .append('path')\n        .attr('d', function(d) {\n          return d.path;\n        }).attr('class', function(d) {\n          return d.class;\n        });\n    }\n\n    if (ideo.config.showBandLabels === true) {\n      ideo.drawBandLabels(ideo.chromosomes);\n    }\n  }\n};\n\n// Get ideogram SVG container\nIdeogram.prototype.getSvg = function() {\n  return d3.select(this.selector).node();\n};\n\nIdeogram.prototype.setSexChromosomes = function(chrs) {\n  // Currently only supported for mammals\n  // TODO: Support all sexually reproducing taxa\n  //  XY sex-determination (mammals):\n  //  - Male: XY <- heterogametic\n  //  - Female: XX\n  //  ZW sex-determination (birds):\n  //  - Male: ZZ\n  //  - Female: ZW <- heterogametic\n  //  X0 sex-determination (some insects):\n  //  - Male: X0, i.e. only X <- heterogametic?\n  //  - Female: XX\n  // TODO: Support sex chromosome aneuploidies in mammals\n  //  - Turner syndrome: X0\n  //  - Klinefelter syndome: XXY\n  //  More types:\n  //  https://en.wikipedia.org/wiki/Category:Sex_chromosome_aneuploidies\n\n  if (this.config.ploidy !== 2 || !this.config.sex) {\n    return;\n  }\n\n  var ideo = this,\n    sexChrs = {X: 1, Y: 1},\n    chr, i;\n\n  ideo.sexChromosomes.list = [];\n\n  for (i = 0; i < chrs.length; i++) {\n    chr = chrs[i];\n\n    if (ideo.config.sex === 'male' && chr in sexChrs) {\n      ideo.sexChromosomes.list.push(chr);\n      if (!ideo.sexChromosomes.index) {\n        ideo.sexChromosomes.index = i;\n      }\n    } else if (chr === 'X') {\n      ideo.sexChromosomes.list.push(chr, chr);\n      ideo.sexChromosomes.index = i;\n    }\n  }\n};\n\n/*\n* Completes default ideogram initialization\n* by calling downstream functions to\n* process raw band data into full JSON objects,\n* render chromosome and cytoband figures and labels,\n* apply initial graphical transformations,\n* hide overlapping band labels, and\n* execute callbacks defined by client code\n*/\nIdeogram.prototype.processBandData = function() {\n  var bandsArray, j, k, chromosome, bands,\n    chrLength, chr,\n    bandData, bandsByChr,\n    taxid, taxids, chrs, chrsByTaxid,\n    ideo = this;\n\n  bandsArray = [];\n  maxLength = 0;\n\n  if (ideo.config.multiorganism === true) {\n    ideo.coordinateSystem = \"bp\";\n    taxids = ideo.config.taxids;\n    for (i = 0; i < taxids.length; i++) {\n      taxid = taxids[i];\n    }\n  } else {\n    if (typeof ideo.config.taxid === \"undefined\") {\n      ideo.config.taxid = ideo.config.taxids[0];\n    }\n    taxid = ideo.config.taxid;\n    taxids = [taxid];\n    ideo.config.taxids = taxids;\n  }\n\n  if (\"chromosomes\" in ideo.config) {\n    chrs = ideo.config.chromosomes;\n  }\n  if (ideo.config.multiorganism) {\n    chrsByTaxid = chrs;\n  }\n\n  ideo.config.chromosomes = {};\n\n  var t0B = new Date().getTime();\n\n  for (j = 0; j < taxids.length; j++) {\n    taxid = taxids[j];\n\n    if (ideo.config.multiorganism) {\n      chrs = chrsByTaxid[taxid];\n    }\n\n    if (ideo.coordinateSystem === \"iscn\" || ideo.config.multiorganism) {\n      bandData = ideo.bandData[taxid];\n\n      bandsByChr = ideo.getBands(bandData, taxid, chrs);\n\n      chrs = Object.keys(bandsByChr).sort(function(a, b) {\n        return naturalSort(a, b);\n      });\n\n      ideo.config.chromosomes[taxid] = chrs.slice();\n      ideo.numChromosomes += ideo.config.chromosomes[taxid].length;\n\n      for (k = 0; k < chrs.length; k++) {\n        chromosome = chrs[k];\n        bands = bandsByChr[chromosome];\n        bandsArray.push(bands);\n\n        chrLength = {\n          iscn: bands[bands.length - 1].iscn.stop,\n          bp: bands[bands.length - 1].bp.stop\n        };\n\n        if (chrLength.iscn > ideo.maxLength.iscn) {\n          ideo.maxLength.iscn = chrLength.iscn;\n        }\n\n        if (chrLength.bp > ideo.maxLength.bp) {\n          ideo.maxLength.bp = chrLength.bp;\n        }\n      }\n    } else if (ideo.coordinateSystem === \"bp\") {\n      // If lacking band-level data\n\n      ideo.config.chromosomes[taxid] = chrs.slice();\n      ideo.numChromosomes += ideo.config.chromosomes[taxid].length;\n\n      for (k = 0; k < chrs.length; k++) {\n        chr = chrs[k];\n        if (chr.length > ideo.maxLength.bp) {\n          ideo.maxLength.bp = chr.length;\n        }\n      }\n    }\n  }\n\n  var t1B = new Date().getTime();\n  if (ideo.debug) {\n    console.log(\"Time in processBandData: \" + (t1B - t0B) + \" ms\");\n  }\n\n  return bandsArray;\n};\n\n/**\n* Initializes an ideogram.\n* Sets some high-level properties based on instance configuration,\n* fetches band and annotation data if needed, and\n* writes an SVG element to the document to contain the ideogram\n*\n*/\nIdeogram.prototype.init = function() {\n  var taxid, i, svgClass;\n\n  var ideo = this;\n\n  var t0 = new Date().getTime();\n\n  var bandsArray = [],\n    numBandDataResponses = 0,\n    resolution = this.config.resolution,\n    accession;\n\n  var promise = new Promise(function(resolve) {\n    ideo.getTaxids(resolve);\n  });\n\n  promise.then(function(taxids) {\n    taxid = taxids[0];\n    ideo.config.taxid = taxid;\n    ideo.config.taxids = taxids;\n\n    var assemblies,\n      bandFileName;\n\n    var bandDataFileNames = {\n      9606: '',\n      10090: ''\n    };\n\n    for (i = 0; i < taxids.length; i++) {\n      taxid = String(taxids[i]);\n\n      if (!ideo.config.assembly) {\n        ideo.config.assembly = \"default\";\n      }\n      assemblies = ideo.organisms[taxid].assemblies;\n      accession = assemblies[ideo.config.assembly];\n\n      bandFileName = [];\n      bandFileName.push(slugify(ideo.organisms[taxid].scientificName));\n      if (accession !== assemblies.default) {\n        bandFileName.push(accession);\n      }\n      if (\n        taxid === '9606' &&\n        (accession !== assemblies.default || resolution !== 850)\n      ) {\n        bandFileName.push(resolution);\n      }\n      bandFileName = bandFileName.join('-') + '.js';\n\n      if (taxid === '9606' || taxid === '10090') {\n        bandDataFileNames[taxid] = bandFileName;\n      }\n\n      if (typeof chrBands === \"undefined\" && taxid in bandDataFileNames) {\n        d3.request(ideo.config.dataDir + bandDataFileNames[taxid])\n        .on(\"beforesend\", function(data) {\n          // Ensures correct taxid is processed in response callback; using\n          // simply 'taxid' variable gives the last *requested* taxid, which\n          // fails when dealing with multiple taxa.\n          data.taxid = taxid;\n        })\n        .get(function(error, data) {\n          eval(data.response);\n\n          ideo.bandData[data.taxid] = chrBands;\n          numBandDataResponses += 1;\n\n          if (numBandDataResponses === taxids.length) {\n            bandsArray = ideo.processBandData();\n            writeContainer();\n          }\n        });\n      } else {\n        if (typeof chrBands !== \"undefined\") {\n          // If bands already available,\n          // e.g. via <script> tag in initial page load\n          ideo.bandData[taxid] = chrBands;\n        }\n        bandsArray = ideo.processBandData();\n        writeContainer();\n      }\n    }\n  });\n\n  function writeContainer() {\n\n    if (ideo.config.annotationsPath) {\n      ideo.fetchAnnots(ideo.config.annotationsPath);\n    }\n\n    // If ploidy description is a string, then convert it to the canonical\n    // array format.  String ploidyDesc is used when depicting e.g. parental\n    // origin each member of chromosome pair in a human genome.\n    // See ploidy_basic.html for usage example.\n    if (\n      'ploidyDesc' in ideo.config &&\n      typeof ideo.config.ploidyDesc === \"string\"\n    ) {\n      var tmp = [];\n      for (var i = 0; i < ideo.numChromosomes; i++) {\n        tmp.push(ideo.config.ploidyDesc);\n      }\n      ideo.config.ploidyDesc = tmp;\n    }\n    // Organism ploidy description\n    ideo._ploidy = new Ploidy(ideo.config);\n\n    // Chromosome's layout\n    ideo._layout = Layout.getInstance(ideo.config, ideo);\n\n    svgClass = \"\";\n    if (ideo.config.showChromosomeLabels) {\n      if (ideo.config.orientation === \"horizontal\") {\n        svgClass += \"labeledLeft \";\n      } else {\n        svgClass += \"labeled \";\n      }\n    }\n\n    if (\n      ideo.config.annotationsLayout &&\n      ideo.config.annotationsLayout === \"overlay\"\n    ) {\n      svgClass += \"faint\";\n    }\n\n    var gradients = ideo.getBandColorGradients();\n    var svgWidth = ideo._layout.getWidth(taxid);\n    var svgHeight = ideo._layout.getHeight(taxid);\n    var svgWidth = ideo._layout.getWidth(taxid);\n\n    d3.select(ideo.config.container)\n      .append('div')\n        .append(\"svg\")\n          .attr(\"id\", \"_ideogram\")\n          .attr(\"class\", svgClass)\n          .attr(\"width\", svgWidth)\n          .attr(\"height\", svgHeight)\n          .html(gradients);\n\n    finishInit();\n  }\n\n  function finishInit() {\n    try {\n      var t0A = new Date().getTime();\n\n      var i;\n\n      ideo.initDrawChromosomes(bandsArray);\n\n      // Waits for potentially large annotation dataset\n      // to be received by the client, then triggers annotation processing\n      if (ideo.config.annotationsPath) {\n        function pa() {\n          if (typeof ideo.timeout !== \"undefined\") {\n            window.clearTimeout(ideo.timeout);\n          }\n\n          ideo.annots = ideo.processAnnotData(ideo.rawAnnots);\n          ideo.drawProcessedAnnots(ideo.annots);\n\n          if (typeof crossfilter !== 'undefined' && ideo.initCrossFilter) {\n            ideo.initCrossFilter();\n          }\n        }\n\n        if (ideo.rawAnnots) {\n          pa();\n        } else {\n          (function checkAnnotData() {\n            ideo.timeout = setTimeout(function() {\n              if (!ideo.rawAnnots) {\n                checkAnnotData();\n              } else {\n                pa();\n              }\n            },\n            50\n          );\n          })();\n        }\n      }\n\n      if (ideo.config.showBandLabels === true) {\n        var bandsToShow = ideo.bandsToShow.join(\",\");\n\n      // d3.selectAll resolves to querySelectorAll (QSA).\n      // QSA takes a surprisingly long time to complete,\n      // and scales with the number of selectors.\n      // Most bands are hidden, so we can optimize by\n      // Hiding all bands, then QSA'ing and displaying the\n      // relatively few bands that are shown.\n        var t0C = new Date().getTime();\n        d3.selectAll(ideo.selector + \" .bandLabel, .bandLabelStalk\")\n          .style(\"display\", \"none\");\n        d3.selectAll(bandsToShow).style(\"display\", \"\");\n        var t1C = new Date().getTime();\n        if (ideo.debug) {\n          console.log(\"Time in showing bands: \" + (t1C - t0C) + \" ms\");\n        }\n\n        if (ideo.config.orientation === \"vertical\") {\n          var chrID;\n          for (i = 0; i < ideo.chromosomesArray.length; i++) {\n            chrID = \"#\" + ideo.chromosomesArray[i].id;\n            ideo.rotateChromosomeLabels(d3.select(chrID), i);\n          }\n        }\n      }\n\n      if (ideo.config.showChromosomeLabels === true) {\n        ideo.drawChromosomeLabels(ideo.chromosomes);\n      }\n\n      if (ideo.config.brush === true) {\n        ideo.createBrush();\n      }\n\n      if (ideo.config.annotations) {\n        ideo.drawAnnots(ideo.config.annotations);\n      }\n\n      var t1A = new Date().getTime();\n      if (ideo.debug) {\n        console.log(\"Time in drawChromosome: \" + (t1A - t0A) + \" ms\");\n      }\n\n      var t1 = new Date().getTime();\n      if (ideo.debug) {\n        console.log(\"Time constructing ideogram: \" + (t1 - t0) + \" ms\");\n      }\n\n      if (ideo.onLoadCallback) {\n        ideo.onLoadCallback();\n      }\n\n      if (!(\"rotatable\" in ideo.config && ideo.config.rotatable === false)) {\n        d3.selectAll(ideo.selector + \" .chromosome\").on(\"click\", function() {\n          ideo.rotateAndToggleDisplay(this);\n        });\n      } else {\n        d3.selectAll(ideo.selector + \" .chromosome\").style(\"cursor\", \"default\");\n      }\n    } catch (e) {\n      // console.log(e);\n      throw e;\n    }\n  }\n};\n","/* Decompresses ideogram's annotations for crossfilter initialization\nBy default, annotations are clustered by chromosome, e.g.\n[\n  {\"chr\": \"1\", \"annots\": [{\"from\": 100, \"to\", 101, \"chr\": \"1\", ...}, ...]},\n  {\"chr\": \"2\", \"annots\": [{\"from\": 500, \"to\", 501, \"chr\": \"2\", ...}, ...]},\n  ...\n]\nThis method flattens that structure to e.g.\n[\n  {\"from\": 100, \"to\": 101, \"chr\": \"1\", ...},\n  ...\n  {\"from\": 500, \"to\": 501, \"chr\": \"2\", ...},\n]\nSee also: packAnnots\n*/\nIdeogram.prototype.unpackAnnots = function() {\n  var chr, annots, i,\n    unpackedAnnots = [],\n    ideo = this,\n    chrs = ideo.annots;\n\n  for (i = 0; i < chrs.length; i++) {\n    chr = chrs[i];\n    annots = chr.annots;\n    unpackedAnnots = unpackedAnnots.concat(annots);\n  }\n\n  return unpackedAnnots;\n};\n\n/*\n  Compresses annots back to default state.  Inverse of unpackAnnots.\n*/\nIdeogram.prototype.packAnnots = function(unpackedAnnots) {\n  var chr, annot, i,\n    annots = [],\n    ideo = this,\n    chrs = ideo.annots;\n\n  for (chr in chrs) {\n    annots.push({chr: chrs[chr].chr, annots: []});\n  }\n\n  for (i = 0; i < unpackedAnnots.length; i++) {\n    annot = unpackedAnnots[i];\n    annots[annot.chrIndex].annots.push(annot);\n  }\n\n  return annots;\n};\n\n/*\n  Initializes crossfilter.  Needed for client-side filtering.\n  More: https://github.com/square/crossfilter/wiki/API-Reference\n*/\nIdeogram.prototype.initCrossFilter = function() {\n  var ideo = this,\n    keys = ideo.rawAnnots.keys,\n    i, facet;\n\n  ideo.unpackedAnnots = ideo.unpackAnnots();\n  ideo.crossfilter = crossfilter(ideo.unpackedAnnots);\n\n  ideo.annotsByFacet = {};\n\n  ideo.facets = keys.slice(3, keys.length);\n\n  for (i = 0; i < ideo.facets.length; i++) {\n    facet = ideo.facets[i];\n    ideo.annotsByFacet[facet] =\n      ideo.crossfilter\n        .dimension(function(d) {\n          return d[facet];\n        });\n  }\n};\n\n/*\n  Filters annotations based on the given selections\n  \"selections\" is an object of objects, e.g.\n\n    {\n      \"tissue-type\": {          <-- a facet\n        \"cerebral-cortex\": 1,   <-- a filter; \"1\" means it is selected\n        \"liver\": 1\n      },\n      \"gene-type\": {\n        mirna\": 1\n      }\n    }\n\n  Translation:\n  select where:\n      (tissue-type is cerebral-cortex OR liver) and (gene-type is mirna)\n\n  TODO:\n    * Filter counts\n    * Range filters\n    * Integrate server-side filtering for very large datasets\n*/\nIdeogram.prototype.filterAnnots = function(selections) {\n  var t0 = Date.now();\n\n  var i, facet,\n    // prevFacet = null,\n    results, fn,\n    counts = {},\n    ideo = this;\n\n  if (Object.keys(selections).length === 0) {\n    results = ideo.unpackedAnnots;\n  } else {\n    for (i = 0; i < ideo.facets.length; i++) {\n      facet = ideo.facets[i];\n      if (facet in selections) {\n        fn = function(d) {\n          if (d in selections[facet]) {\n            return true;\n          }\n        };\n      } else {\n        fn = null;\n      }\n      ideo.annotsByFacet[facet].filter(fn);\n      counts[facet] = ideo.annotsByFacet[facet].group().top(Infinity);\n    }\n\n    results = ideo.annotsByFacet[facet].top(Infinity);\n  }\n\n  for (i < 0; i < ideo.facets.length; i++) {\n    ideo.annotsByFacet[facet].filterAll(); // clear filters\n  }\n\n  results = ideo.packAnnots(results);\n\n  d3.selectAll(ideo.selector + \" polygon.annot\").remove();\n  ideo.drawAnnots(results);\n\n  console.log(\"Time in filterAnnots: \" + (Date.now() - t0) + \" ms\");\n\n  return counts;\n};\n"]}